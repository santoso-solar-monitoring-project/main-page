{"version":3,"sources":["utils/Imm/withImm.ts","utils/warn.ts","utils/ignore.ts","utils/DefaultProps.ts","components/usePoints/index.tsx","utils/BaseProps.ts","components/Line/index.tsx","utils/evaluate.ts","utils/CustomHooks/useCounter.ts","utils/noop.ts","utils/CustomHooks/useThrottled.ts","utils/CustomHooks/useDataBufferSilent.ts","utils/CustomHooks/useDecay.ts","components/IVPlot/useDataFeed.ts","utils/coordinates.ts","utils/clamp.ts","components/IVPlot/useView.ts","components/IVPlot/useLine.ts","utils/identity.ts","utils/diff.ts","components/IVPlot/useTicks.tsx","components/IVPlot/useControls.ts","components/IVPlot/useAnimationFrame.ts","utils/CustomHooks/useSilentCounter.ts","components/IVPlot/useAnimationClock.ts","components/IVPlot/_IVPlot.tsx","utils/throttleEvent.ts","components/Blur/index.tsx","components/IVPlot/index.tsx","components/TitleBar/Wifi.js","components/TitleBar/Time.js","components/TitleBar/lock.svg","components/TitleBar/Login.js","components/TitleBar/index.js","App.tsx","serviceWorker.js","index.tsx"],"names":["ignoreUndefined","old","next","undefined","defaultMerger","_old","mergeIntersect","target","_len","arguments","length","sources","Array","_key","mergeIntersectWith","apply","concat","merger","_len2","_key2","selection","Object","keys","filter","Boolean","map","source","key","includes","reduce","obj","objectSpread","defineProperty","mergeWith","toConsumableArray","merge","_len3","_key3","_len4","_key4","_mergeDeepWith","toJS","isMergeable","a","List","isList","_len5","collections","_key5","slice","acc","x","_mergeDeep","b","nextItem","index","existingItem","get","set","fromJS","_len6","_key6","aaaaa","hello","canvasStyle","canvasEffects","bbbbb","poop","process","declare","propsClass","baseClasses","defaults","withImm","base","forEach","warn","types","required","injected","propsIn","propsOut","own","bases","extend","this","factory","props","allOptional","some","c","Wrap","classCallCheck","createClass","value","f","assign","placeholder","rest","wrap","default","optional","decorator","_class","_temp","_class2","_temp2","values","reverse","Points","circleStyle","r","fill","stroke","strokeWidth","textStyle","style","font","_ref","ticks","ticksScale","data","count","curve","scaleY","objectWithoutProperties","react_default","createElement","web","g","_","i","interpolate","tick","y","current","visibility","transform","circle","cx","cy","text","invert","toFixed","StyleProp","BaseProps","Line","line","clock","theLine","useMemo","expr","context","Function","k","evaluate","d3","path","d","useCounter","initial","_useState","useState","_useState2","slicedToArray","setValue","useCallback","noop","useThrottled","timeout","first","last","inputs","event","useEffect","id","ongoing","handler","clearTimeout","window","setTimeout","addEventListener","removeEventListener","maxSize","Infinity","Args","initialValue","minDelta","maxDelta","halfLife","UpdateArgs","signal","useRef","_ref2","datum","delta","decay","Math","pow","isNaN","CURRENT","min","max","lo","hi","useDataFeed","_x","Date","now","random","pusher","options","cluster","forceTLS","samplePeriod","_ref2$pusher","channelName","_useDataBufferSilent","args","_withImm$merge","buffer","Denque","updateBuffer","newData","splice","useDataBufferSilent","_useDataBufferSilent2","receiveData","Pusher","subscribe","bind","_ref3","payload","unsubscribe","deriveCoordinate","coord","_coord$width","width","w","_coord$height","height","h","clamp","range","_withImm$mergeInterse","_withImm$mergeInterse2","useView","extraHistory","scaleX","_useSpring","useSpring","extent","config","tension","friction","_useSpring2","currentScaleX","copy","bisector","transformed","domain","_currentScaleX$domain","_currentScaleX$domain2","start","end","history","left","right","padRight","padLeft","view","useLine","timespan","dims","padDomain","padRange","init","_deriveCoordinates$ca","_ref$x","_ref$y","call","padX","padY","_useView","_useView2","update","identity","arg","diff","convert","useTicks","lineStyle","scale","currentScale","format","tickFormat","span","getTime","every","gap","pad","t","y2","dblclick","useControls","svgRef","baseScale","effect","zoom","scaleExtent","translateExtent","on","rescaleX","duration","paused","at","s","dx","translateBy","clickID","NaN","state","nextState","prevState","from","unpaused","transition","reset","batchMap","Map","silent","interval","batch","useAnimationFrame","_Args","firstTime","console","error","increment","useSilentCounter","nextFrame","tail","callback","requestAnimationFrame","tracks","isFinite","has","push","size","loop","ts","performance","cancelAnimationFrame","useAnimationClock","FrameArgs","immediate","_IVPlot","channelNames","getBoundingClientRect","amps","volts","updateControls","_useTicks","_useTicks2","Ticks","alpha","Fragment","rect","clipPath","strokeDasharray","strokeDashoffset","defaultArgs","_window","throttle","customEvent","Error","ready","dispatcher","dispatchEvent","CustomEvent","throttler","passive","Props","radius","enabled","Blur","ref","children","document","hidden","div","React","forwardRef","IVPlot","BlurProps","position","borderRadius","backgroundColor","_useCounter","components_Blur","Wifi","bars","display","alignItems","viewBox","Children","e","isValidElement","opacity","level","cloneElement","marginLeft","Time","setState","animate","toLocaleTimeString","_extends","prototype","hasOwnProperty","lock_ref","lock_SvgComponent","__webpack_require__","p","Login","username","TitleBar","lineHeight","color","justifyContent","paddingLeft","paddingRight","Wifi_Wifi","CircleDumby","progress","C","PI","fontFamily","fontSize","textAnchor","alignmentBaseline","dy","App","components_TitleBar","className","App_CircleDumby","components_IVPlot","Component","location","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","then","registration","unregister"],"mappings":"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","file":"static/js/main.9e0138bd.chunk.js","sourcesContent":["import { List, fromJS } from 'immutable';\r\nimport { ArrayToIntersectionNonNull } from 'utils/meta';\r\n\r\n// Useful merger to ignore undefined\r\n// Another difference: The merged result excludes properties not originally present in `target`\r\nexport function ignoreUndefined<V>(old: V, next: V) {\r\n  return next === undefined ? old : next;\r\n}\r\n\r\nexport function defaultMerger<V>(_old: V, next: V) {\r\n  return next;\r\n}\r\n\r\n// Like `Object.assign` but properties are merged deeply. Sources are copied not modified. Does not preserve reference equality for Immutable objects because the result is converted to a POJ. Use `_mergeDeep` to get an Immutable object back. Passing no sources will yield an empty object {}. Undefined values in `sources` are ignored (do not overwrite values in first source). Only considers own properties of objects (not properties inherited in their prototypes). Does not add new properties not originally in `target`.\r\nexport function mergeIntersect<T extends object, S extends any[]>(\r\n  target: T,\r\n  ...sources: S\r\n) {\r\n  return mergeIntersectWith(ignoreUndefined, target, ...sources) as T;\r\n}\r\n\r\n// Same as `mergeIntersect` but properties are merged deeply using the custom merge conflict resolver passed.\r\nexport function mergeIntersectWith<T extends object, S extends any[]>(\r\n  merger: <K, V>(old: V, next: V, key: K) => V,\r\n  target: T,\r\n  ...sources: S\r\n) {\r\n  // Filter out props not already present in `target`.\r\n  const selection = Object.keys(target);\r\n  sources = sources.filter(Boolean).map(source =>\r\n    // Special case for Array objects (preserve its prototype)\r\n    source instanceof Array\r\n      ? source\r\n      : Object.keys(source)\r\n          .filter(key => selection.includes(key))\r\n          .reduce((obj, key) => {\r\n            return {\r\n              ...obj,\r\n              [key]: (source as any)[key],\r\n            };\r\n          }, {})\r\n  ) as S;\r\n  return mergeWith(merger, target, ...sources) as T;\r\n}\r\n\r\n// Like `Object.assign` but properties are merged deeply. Sources are copied not modified. Does not preserve reference equality for Immutable objects because the result is converted to a POJ. Use `_mergeDeep` to get an Immutable object back. Passing no sources will yield an empty object {}. Undefined values in `sources` are ignored (do not overwrite values in first source). Only considers own properties of objects (not properties inherited in their prototypes).\r\n// Note: For some reason TypeScript doesn't recognize if you call merge() with both spread and individual arguments.\r\n// For instance `merge(...args, defaultSettings)` does not work!\r\n// My signature is probably at fault but I don't know how to fix it. (2/23/19)\r\nexport function merge<T extends any[]>(...sources: T) {\r\n  return mergeWith(ignoreUndefined, ...sources) as {\r\n    [K in keyof ArrayToIntersectionNonNull<T>]: ArrayToIntersectionNonNull<T>[K]\r\n  };\r\n}\r\n\r\n// Same as `merge` but properties are merged deeply using the custom merge conflict resolver passed.\r\nexport function mergeWith<T extends any[]>(\r\n  merger: <K, V>(old: V, next: V, key: K) => V,\r\n  ...sources: T\r\n) {\r\n  return _mergeDeepWith(merger, ...sources).toJS() as {\r\n    [K in keyof ArrayToIntersectionNonNull<T>]: ArrayToIntersectionNonNull<T>[K]\r\n  };\r\n}\r\n\r\nfunction isMergeable(a: any): a is { mergeWith: Function } {\r\n  return (\r\n    a &&\r\n    typeof a === 'object' &&\r\n    typeof a.mergeWith === 'function' &&\r\n    !List.isList(a)\r\n  );\r\n}\r\n\r\ntype Merger = <K, V>(oldVal: V, newVal: V, key?: K) => V;\r\nexport function _mergeDeepWith<T extends object[]>(\r\n  merger: Merger,\r\n  ...collections: T\r\n) {\r\n  /* \r\n  https://github.com/immutable-js/immutable-js/issues/1452#issuecomment-386162309\r\n  */\r\n  const _mergeDeep = <K, V>(a: V, b: V, key?: K): V | List<unknown> => {\r\n    // If b is null, it would overwrite a, even if a is mergeable\r\n    if (isMergeable(a) && b !== null) {\r\n      return a.mergeWith(_mergeDeep, b);\r\n    }\r\n\r\n    if (!List.isList(a) || !List.isList(b)) {\r\n      return merger(a, b, key);\r\n    }\r\n\r\n    return (b as List<unknown>).reduce(\r\n      (acc, nextItem, index) => {\r\n        const existingItem = acc.get(index);\r\n        if (isMergeable(existingItem)) {\r\n          return acc.set(index, existingItem.mergeWith(_mergeDeep, nextItem));\r\n        }\r\n\r\n        return acc.set(index, merger(existingItem, nextItem, index));\r\n      },\r\n      a as List<unknown>\r\n    );\r\n  };\r\n\r\n  return collections\r\n    .slice(1)\r\n    .reduce(\r\n      (acc, x) => _mergeDeep(acc, fromJS(x)),\r\n      fromJS(collections[0] != null ? collections[0] : {})\r\n    );\r\n}\r\n\r\nexport function _mergeDeep<T extends object[]>(...collections: T) {\r\n  return _mergeDeepWith(defaultMerger, ...collections);\r\n}\r\n\r\n// Example use:\r\nconst aaaaa = { hello: 3, canvasStyle: [1, 2, 3], canvasEffects: () => {} };\r\nconst bbbbb = { hello: 'world', canvasStyle: [3, , 1], poop: 'hiii' };\r\nconst ccccc = merge(aaaaa, bbbbb);\r\nconst ddddd = merge(...([aaaaa, bbbbb] as [typeof aaaaa, typeof bbbbb]));\r\n// const ccccc = merge();\r\n// console.log(ccccc);\r\n\r\n// Object.assign(window, {\r\n//   List,\r\n//   fromJS,\r\n//   _mergeDeepWith,\r\n//   _mergeDeep,\r\n//   merge,\r\n//   aaaaa,\r\n//   bbbbb,\r\n//   ccccc,\r\n// });\r\n","import ignore from './ignore';\r\n\r\nexport default (process.env.NODE_ENV === 'development' ? console.warn : ignore);\r\n","const ignore = (..._args: any[]) => {};\r\nexport default ignore;\r\n","import {\r\n  Omit,\r\n  Equals,\r\n  RequiredOnly,\r\n  ArrayToIntersectionNonNull,\r\n  RecursivePartial,\r\n} from './meta';\r\nimport * as withImm from './Imm/withImm';\r\nimport warn from './warn';\r\n\r\nexport type PropsClass = {\r\n  required?: object;\r\n  defaults?: object;\r\n  injected?: object;\r\n};\r\n\r\ntype Mix<T> = Pick<T, keyof T>;\r\n\r\n// Returns a factory that applies default props to props\r\nexport function declare<P extends PropsClass, S extends PropsClass[]>(\r\n  propsClass: P,\r\n  ...baseClasses: S\r\n) {\r\n  type R = P['required'] & {};\r\n  type D = P['defaults'] & {};\r\n  type I = P['injected'] & {};\r\n\r\n  type BasesR<T> = T extends PropsClass ? T['required'] : {};\r\n  type BasesD<T> = T extends PropsClass ? T['defaults'] : {};\r\n  type BasesI<T> = T extends PropsClass ? T['injected'] : {};\r\n  type BaseClasses = ArrayToIntersectionNonNull<S>;\r\n\r\n  // Properties in `propsClass.defaults` will make inherited properties with the same name optional, but will not affect properties in `propsClass.required`.\r\n  type Defaults = Mix<D & BasesD<BaseClasses>>;\r\n  type Required = Mix<R & Omit<BasesR<BaseClasses>, keyof Defaults>>;\r\n  type Injected = Mix<I & BasesI<BaseClasses>>;\r\n\r\n  // External-facing props interface\r\n  type PropsIn = Mix<\r\n    Required & RecursivePartial<Defaults> & RecursivePartial<Injected>\r\n  >;\r\n  // Internal-facing props interface\r\n  type PropsOut = Mix<Required & Defaults & Injected>;\r\n\r\n  const defaults = withImm.merge(\r\n    ...baseClasses.map(base => base.defaults),\r\n    propsClass.defaults as D\r\n  ) as Defaults;\r\n\r\n  // Warn about bad behavior with React refs\r\n  Object.keys(defaults).forEach(key => {\r\n    if (key === 'children') {\r\n      warn(`Don't use a default children prop! Refs will be lost.`);\r\n    } else if (\r\n      typeof defaults[key as keyof Defaults] === 'object' &&\r\n      'current' in defaults[key as keyof Defaults]\r\n    ) {\r\n      warn(\r\n        `Found an default property with a 'current' property. If this is a 'React.RefObject' beware that the ref may be lost! ${key}:`,\r\n        defaults[key as keyof Defaults]\r\n      );\r\n    }\r\n  });\r\n\r\n  type Me = { required: Required; defaults: Defaults; injected: Injected };\r\n\r\n  function extend<T extends PropsClass, U extends PropsClass[]>(\r\n    this: Me,\r\n    propsClass: T,\r\n    ...baseClasses: U\r\n  ) {\r\n    // Need to phrase it like this for type inference...\r\n    return declare(propsClass, declare(this, ...baseClasses));\r\n  }\r\n\r\n  const types = {\r\n    // Default arguments\r\n    defaults: defaults as { [K in keyof Defaults]: Defaults[K] },\r\n    // Required arguments\r\n    required: {} as { [K in keyof Required]: Required[K] },\r\n    // Values supplied not at the call site\r\n    injected: {} as { [K in keyof Injected]: Injected[K] },\r\n    // External-facing props interface (type)\r\n    propsIn: {} as { [K in keyof PropsIn]: PropsIn[K] },\r\n    // Internal-facing props interface (type)\r\n    propsOut: {} as { [K in keyof PropsOut]: PropsOut[K] },\r\n    // Class with my own required and defaults, discounting inherited properties\r\n    own: propsClass as { [K in keyof PropsClass]-?: P[K] & {} },\r\n    // List of base classes (filtered to just show their PropsClass fields)\r\n    bases: (baseClasses as unknown) as {\r\n      [K in keyof S]: S[K] extends PropsClass\r\n        ? { [L in keyof PropsClass]-?: S[K][L] }\r\n        : S[K]\r\n    },\r\n    // Shortcut to declare() with this DefaultProps object as the baseClass\r\n    extend,\r\n  };\r\n\r\n  // Type expanded inline for better tooltip\r\n  type Factory = (\r\n    props: { [K in keyof PropsIn]: PropsIn[K] }\r\n  ) => { [K in keyof PropsOut]: PropsOut[K] };\r\n\r\n  const factory: Factory = props => {\r\n    return {\r\n      ...props,\r\n      ...withImm.mergeIntersect(defaults, props),\r\n    } as ReturnType<Factory>;\r\n  };\r\n\r\n  // Runtime check for whether all props specified are optional (defaults or injected)\r\n  const allOptional = ![propsClass, ...baseClasses].some(c => 'required' in c);\r\n\r\n  type Decorated<T> = <U extends any[], V>(\r\n    props: PropsIn,\r\n    placeholder?: V,\r\n    ...rest: U\r\n  ) => T extends (...args: any[]) => infer W ? W : any;\r\n\r\n  type DecoratedOptional<T> = <U extends any[], V>(\r\n    props?: PropsIn,\r\n    placeholder?: V,\r\n    ...rest: U\r\n  ) => T extends (...args: any[]) => infer W ? W : any;\r\n\r\n  type AcceptsPropsOut = (props: PropsOut, ...rest: any[]) => any;\r\n\r\n  class Wrap {\r\n    // Decorator accepting a function whose props are to be transformed\r\n    static default<T extends AcceptsPropsOut>(f: T) {\r\n      const decorated: Decorated<T> = (props, placeholder, ...rest) => {\r\n        return f(\r\n          factory(props as Parameters<Factory>[0]),\r\n          placeholder,\r\n          ...rest\r\n        );\r\n      };\r\n\r\n      return Object.assign(decorated, types, { wrap: Wrap.default });\r\n    }\r\n\r\n    // Decorator accepting a function whose props are to be transformed where the props argument is optional.\r\n    static optional<T extends AcceptsPropsOut>(f: T) {\r\n      const decorated: DecoratedOptional<T> = (props, placeholder, ...rest) => {\r\n        return f(\r\n          factory(props as Parameters<Factory>[0]),\r\n          placeholder,\r\n          ...rest\r\n        );\r\n      };\r\n\r\n      return Object.assign(decorated, types, { wrap: Wrap.optional });\r\n    }\r\n\r\n    // Select which Wrap signature to use depending on allOptional\r\n    static decorator = (allOptional ? Wrap.optional : Wrap.default) as Equals<\r\n      RequiredOnly<Required>,\r\n      {},\r\n      typeof Wrap.optional,\r\n      typeof Wrap.default\r\n    >;\r\n  }\r\n\r\n  return Object.assign(factory, types, { wrap: Wrap['decorator'] });\r\n}\r\n\r\nexport function required<T extends object, S extends object[] = []>(\r\n  ..._others: S\r\n) {\r\n  type Others = ArrayToIntersectionNonNull<S>;\r\n  return declare(\r\n    class {\r\n      static required: T & Others;\r\n    }\r\n  );\r\n}\r\n\r\n// Arguments are deeply merged in reverse order.\r\nexport function defaults<T extends object[]>(...values: T) {\r\n  return declare(\r\n    class {\r\n      static defaults = withImm.merge(...(values.reverse() as T));\r\n    }\r\n  );\r\n}\r\n\r\nexport function injected<T extends object, S extends object[] = []>(\r\n  ..._others: S\r\n) {\r\n  type Others = ArrayToIntersectionNonNull<S>;\r\n  return declare(\r\n    class {\r\n      static injected: T & Others;\r\n    }\r\n  );\r\n}\r\n\r\n// Test usage:\r\n// import React from 'react';\r\n// import { GoodCanvasElement } from 'components/GoodCanvas';\r\n// import { BaseProps } from 'utils/BaseProps';\r\n// import noop from 'utils/noop';\r\n// class Props {\r\n//   static required: {\r\n//     canvasRef: React.RefObject<GoodCanvasElement> | 5;\r\n//     // canvasStyle: number;\r\n//   };\r\n//   static defaults = {\r\n//     // canvasStyle: {},\r\n//     canvasEffects: noop,\r\n//     canvasNeedsUpdate: 0,\r\n//   };\r\n// }\r\n\r\n// class PropsB {\r\n//   static required: {\r\n//     canvasRef: React.RefObject<GoodCanvasElement> | 5;\r\n//     canvasStyle: { hi: number }; // required if not parent\r\n//   };\r\n//   static defaults = {\r\n//     canvasStyle: {}, // only applied on inheritance\r\n//     canvasEffects: noop,\r\n//     canvasNeedsUpdate: 0,\r\n//   };\r\n// }\r\n\r\n// const a = bind(\r\n//   Props,\r\n//   // [1, 2],\r\n//   // withDefault(Props),\r\n//   // { hi: 'world', defaults: { ddd: 4 }, required: { hello: 'world' } },\r\n//   PropsB\r\n// );\r\n// const c = a.required;\r\n// const d = a.defaults;\r\n// const e = a.own.required;\r\n// const f = a.own.defaults;\r\n// const g = a.bases;\r\n// const h = a.propsIn;\r\n// const i = a.propsOut;\r\n// const j = a.decorate;\r\n// const b = a({ canvasRef: 5, canvasNeedsUpdate: 3 });\r\n// type DefaultProps = Pick<typeof b, keyof typeof b>;\r\n","import React from 'react';\r\nimport { Pair } from 'utils/Pair';\r\nimport { defaults, required, declare } from 'utils/DefaultProps';\r\nimport { REF } from 'utils/easier';\r\nimport { animated, OpaqueInterpolation, interpolate } from 'react-spring';\r\nimport { SVGAttributes } from 'react';\r\nimport { Animatable } from 'react-spring/renderprops';\r\n\r\nexport const Args = declare(\r\n  required<{\r\n    data: REF<Pair[]>;\r\n    ticks: OpaqueInterpolation<Date[]>;\r\n    ticksScale: d3.ScaleTime<number, number>;\r\n    scaleY: d3.ScaleLinear<number, number>;\r\n    curve: d3.CurveCatmullRomFactory;\r\n    count: number;\r\n  }>(),\r\n  defaults({\r\n    circleStyle: {\r\n      r: 3,\r\n      fill: 'hsl(330, 100%, 75%)',\r\n      stroke: 'hsl(330, 100%, 50%)',\r\n      strokeWidth: 0.5,\r\n    } as Animatable<SVGAttributes<SVGCircleElement>>,\r\n    textStyle: {\r\n      fill: 'hsl(330, 100%, 75%)',\r\n      style: {\r\n        font: '16px ubuntu mono, monospace',\r\n      },\r\n    } as Animatable<SVGAttributes<SVGTextElement>>,\r\n  }),\r\n  required<Animatable<SVGAttributes<SVGGElement>>>()\r\n);\r\n\r\n/* \r\n{\r\noffsetX: 0,\r\noffsetY: 0,\r\nblurRadius: 5,\r\nspreadRadius: 0.5,\r\n// use alpha = 0.5 for light-mode\r\ncolor: 'hsl(330, 100%, 50%)',\r\n}\r\n*/\r\nexport const Points = Args.wrap(\r\n  ({\r\n    ticks,\r\n    ticksScale,\r\n    data,\r\n    count,\r\n    curve,\r\n    scaleY,\r\n    circleStyle,\r\n    textStyle,\r\n    ...rest\r\n  }) => (\r\n    <animated.g {...rest}>\r\n      {[...Array(count)].map((_, i) => {\r\n        // console.log('hiiii', i);\r\n        const tick = ticks.interpolate<Date | 0>(ticks => ticks[i] || 0);\r\n        const x = tick.interpolate(tick => ticksScale(tick));\r\n        const y = x.interpolate(x =>\r\n          x !== 0 && data.current.length\r\n            ? curve.interpolate(x, data.current) || -1\r\n            : -1\r\n        );\r\n        const visibility = y.interpolate<string>(y =>\r\n          y !== -1 ? 'visible' : 'hidden'\r\n        );\r\n\r\n        return (\r\n          <animated.g\r\n            key={i}\r\n            visibility={visibility}\r\n            transform={interpolate([x, y], (x, y) => `translate(${x},${y})`)}\r\n          >\r\n            <animated.circle cx={0} cy={0} {...circleStyle} />\r\n            <animated.text x={5} y={4} {...textStyle}>\r\n              {y.interpolate(y => scaleY.invert(y).toFixed(1))}\r\n            </animated.text>\r\n          </animated.g>\r\n        );\r\n      })}\r\n    </animated.g>\r\n  )\r\n);\r\n","import React from 'react';\r\nimport { declare, required, defaults } from './DefaultProps';\r\n\r\nexport const StyleProp = defaults({\r\n  style: {} as Partial<React.CSSProperties>,\r\n});\r\n\r\n// https://github.com/sw-yx/react-typescript-cheatsheet#useful-react-prop-type-examples\r\nexport const BaseProps = declare(\r\n  required<{\r\n    /* 1/9/19: SIGH. TypeScript can't check `children` because `React.createElement` returns back a super general `Element` type. */\r\n    children?: React.ReactNode;\r\n    onChange?: (e: React.FormEvent<HTMLInputElement>) => void;\r\n  }>(),\r\n  StyleProp\r\n);\r\n","import React, { useMemo, SVGAttributes } from 'react';\r\nimport * as d3 from 'd3';\r\nimport { Pair } from 'utils/Pair';\r\nimport { evaluate } from 'utils/evaluate';\r\nimport { required, defaults, declare } from 'utils/DefaultProps';\r\nimport { animated, OpaqueInterpolation } from 'react-spring';\r\nimport { BaseProps } from 'utils/BaseProps';\r\nimport { REF } from 'utils/easier';\r\nimport { Animatable } from 'react-spring/renderprops';\r\n\r\nexport const Args = declare(\r\n  required<{ data: REF<Pair[]>; clock: OpaqueInterpolation<number> }>(),\r\n  defaults({\r\n    // alpha = 0.5 gives centripetal CatmullRom\r\n    line: 'd3.line().curve(d3.curveCatmullRom.alpha(0.5))' as\r\n      | d3.Line<Pair>\r\n      | string,\r\n  }),\r\n  defaults({\r\n    fill: 'transparent',\r\n    stroke: 'hsl(330, 100%, 67%)',\r\n    strokeWidth: 1.5,\r\n  } as Animatable<SVGAttributes<SVGPathElement>>),\r\n  BaseProps\r\n);\r\n\r\nexport const Line = Args.wrap(({ data, clock, line, ...rest }) => {\r\n  const theLine = useMemo(\r\n    () =>\r\n      (typeof line === 'string' ? evaluate(line, { d3 }) : line) as d3.Line<\r\n        Pair\r\n      >,\r\n    [line]\r\n  );\r\n\r\n  return (\r\n    <animated.path\r\n      d={clock.interpolate(() => theLine(data.current) || 'M0,0')}\r\n      {...rest}\r\n    />\r\n  );\r\n});\r\n","export const evaluate = (expr: string, context: any = {}) =>\r\n  Function(...Object.keys(context), `'use strict';return ${expr}`)(\r\n    ...Object.keys(context).map(k => context[k])\r\n  );\r\n","import { useState, useCallback } from 'react';\r\n\r\nexport function useCounter(initial: number = 0): [number, () => void] {\r\n  const [value, setValue] = useState(initial);\r\n  const increment = useCallback(() => setValue(i => i + 1), []);\r\n  return [value, increment];\r\n}\r\n","const noop = () => {};\r\nexport default noop;\r\n","import React, { useEffect } from 'react';\r\nimport noop from 'utils/noop';\r\nimport { declare, required, defaults } from 'utils/DefaultProps';\r\n\r\nconst Args = declare(\r\n  required<{ event: string }>(),\r\n  defaults({\r\n    timeout: 250,\r\n    first: noop,\r\n    last: noop,\r\n  })\r\n);\r\n\r\nexport const useThrottled = Args.wrap(\r\n  ({ event, first, last, timeout }, inputs?: React.InputIdentityList) => {\r\n    useEffect(() => {\r\n      if (!event) return;\r\n\r\n      let ongoing = false;\r\n      let id: number;\r\n\r\n      const handler = () => {\r\n        // first resize event\r\n        if (!ongoing) {\r\n          if (first) first();\r\n          ongoing = true;\r\n        }\r\n\r\n        // dismiss pending events\r\n        if (id) clearTimeout(id);\r\n\r\n        // fulfill last response after timeout\r\n        id = window.setTimeout(() => {\r\n          ongoing = false;\r\n          if (last) last();\r\n        }, timeout);\r\n      };\r\n\r\n      window.addEventListener(event, handler);\r\n      return () => window.removeEventListener(event, handler);\r\n    }, inputs);\r\n  }\r\n);\r\n","import { useMemo, useCallback } from 'react';\r\nimport { withImm } from 'utils/Imm';\r\nimport Denque from 'denque';\r\n\r\nconst defaults = {\r\n  maxSize: Infinity,\r\n};\r\n\r\ninterface Args<T> extends Partial<typeof defaults> {\r\n  initialValue?: T[];\r\n}\r\n\r\nexport function useDataBufferSilent<T = number, U extends Array<T> = T[]>(\r\n  args: Args<T>\r\n): [Denque<T>, (newData: U) => void] {\r\n  const { initialValue, maxSize } = withImm.merge(defaults, args);\r\n  const buffer = useMemo(\r\n    () => (initialValue ? new Denque<T>(initialValue) : new Denque<T>()),\r\n    []\r\n  );\r\n  const updateBuffer = useCallback((newData: U) => {\r\n    buffer.splice(buffer.length, 0, ...newData);\r\n    if (buffer.length > maxSize!) {\r\n      buffer.splice(0, buffer.length - maxSize!);\r\n    }\r\n  }, []);\r\n  return [buffer, updateBuffer];\r\n}\r\n","import { useRef } from 'react';\r\nimport warn from 'utils/warn';\r\nimport { defaults, required } from 'utils/DefaultProps';\r\n\r\nconst Args = defaults({\r\n  initialValue: 0,\r\n  minDelta: 10, // ms\r\n  maxDelta: Infinity, // ms\r\n  halfLife: 250, // ms\r\n});\r\n\r\nconst UpdateArgs = required<{\r\n  datum: number;\r\n  delta: number; // ms\r\n}>();\r\n\r\nexport const useDecay = Args.wrap(\r\n  ({ initialValue, minDelta, maxDelta, halfLife }) => {\r\n    const signal = useRef(initialValue);\r\n\r\n    const update = UpdateArgs.wrap(({ datum, delta }) => {\r\n      const decay = Math.pow(0.5, delta / halfLife);\r\n      if (delta < minDelta) {\r\n      } else if (delta > maxDelta) signal.current = 1000 / delta;\r\n      else signal.current = decay * signal.current + (1 - decay) * datum;\r\n      if (isNaN(signal.current)) {\r\n        warn('Signal was NaN...');\r\n        signal.current = 0;\r\n      }\r\n      return signal.current;\r\n    });\r\n\r\n    return update;\r\n  }\r\n);\r\n","import { useEffect } from 'react';\r\nimport { Pair } from 'utils/Pair';\r\nimport { useDataBufferSilent } from 'utils/CustomHooks';\r\nimport { declare, required, defaults } from 'utils/DefaultProps';\r\nimport Pusher from 'pusher-js';\r\n\r\nconst CURRENT = [3.1, 3.2, 2.1, 2.0, 2.9, 1.8, 4.5, 4.2];\r\nconst [lo, hi] = [Math.min(...CURRENT), Math.max(...CURRENT)];\r\nconst generate = (): Pair => [Date.now(), Math.random() * (hi - lo) + lo];\r\nconst _initialValue = [...Array(100)].map((_x, i) => [\r\n  Date.now() + ((100 - 1 - i) / 100) * -10000,\r\n  Math.random() * (hi - lo) + lo,\r\n]);\r\n\r\nconst Args = declare(\r\n  required<{\r\n    samplePeriod: number; // ms\r\n    pusher: {\r\n      channelName: string;\r\n    };\r\n  }>(),\r\n  defaults({\r\n    pusher: {\r\n      key: '9dfb7224d7fd60cc9c5f',\r\n      options: { cluster: 'us2', forceTLS: true },\r\n      event: 'new-data',\r\n    },\r\n    maxSize: 100,\r\n    initialValue: [] as Pair[],\r\n  })\r\n);\r\n\r\nexport const useDataFeed = Args.wrap(\r\n  ({\r\n    samplePeriod,\r\n    maxSize,\r\n    initialValue,\r\n    pusher: { key, options, channelName, event },\r\n  }) => {\r\n    const [buffer, concat] = useDataBufferSilent<Pair>({\r\n      maxSize,\r\n      initialValue,\r\n    });\r\n\r\n    useEffect(() => {\r\n      if (channelName === 'debug') {\r\n        let id: number;\r\n\r\n        const receiveData = () => {\r\n          concat([generate()]);\r\n          id = window.setTimeout(\r\n            receiveData,\r\n            samplePeriod + 250 * (Math.random() - 0.5)\r\n          );\r\n        };\r\n        receiveData();\r\n\r\n        return () => clearTimeout(id);\r\n      } else {\r\n        const pusher = new Pusher(key, options);\r\n        const channel = pusher.subscribe(channelName);\r\n        const handler = ({ payload }: { payload: Pair[] }) => {\r\n          concat(payload);\r\n          Object.assign(window, { buffer, payload });\r\n        };\r\n        channel.bind(event, handler);\r\n\r\n        return () => pusher.unsubscribe(channelName);\r\n      }\r\n    }, []);\r\n\r\n    return buffer;\r\n  }\r\n);\r\n","export function deriveCoordinate(\r\n  this: { width: number; height: number },\r\n  coord: Partial<{ width: number; height: number }>\r\n) {\r\n  const { width: w = 0, height: h = 0 } = coord;\r\n  const { width, height } = this;\r\n  const result = w * width + h * height;\r\n  return result;\r\n}\r\n\r\nexport function deriveCoordinates(\r\n  this: { width: number; height: number },\r\n  {\r\n    x = {},\r\n    y = {},\r\n  }: Partial<{\r\n    x: Partial<{ width: number; height: number }>;\r\n    y: Partial<{ width: number; height: number }>;\r\n  }>\r\n) {\r\n  return {\r\n    x: deriveCoordinate.call(this, x),\r\n    y: deriveCoordinate.call(this, y),\r\n  };\r\n}\r\n","import { withImm } from './Imm';\r\n\r\nconst clamp = (x: number, range: [number?, number?]) => {\r\n  const [lo, hi] = withImm.mergeIntersect([-Infinity, Infinity], range);\r\n  return Math.min(hi, Math.max(lo, x));\r\n};\r\n\r\nexport default clamp;\r\n","import { Pair } from 'utils/Pair';\r\nimport { useSpring } from 'react-spring';\r\nimport Denque from 'denque';\r\nimport * as d3 from 'd3';\r\nimport clamp from 'utils/clamp';\r\nimport { useMemo, useRef, useEffect } from 'react';\r\nimport { newEffect } from 'utils/canvas';\r\nimport { required, defaults, declare } from 'utils/DefaultProps';\r\n\r\nconst Args = declare(\r\n  required<{\r\n    scaleX: d3.ScaleLinear<number, number>;\r\n    scaleY: d3.ScaleLinear<number, number>;\r\n    buffer: Denque<Pair>;\r\n  }>(),\r\n  defaults({\r\n    // fraction of timespan to extend memory by for vertical autoscaling\r\n    extraHistory: 0,\r\n  })\r\n);\r\n\r\nexport const useView = Args.wrap(({ scaleX, scaleY, buffer, extraHistory }) => {\r\n  const [{ extent }, set] = useSpring(() => ({\r\n    extent: [0, 0],\r\n    config: { tension: 60, friction: 10 },\r\n  }));\r\n  const currentScaleX = scaleX.copy();\r\n  const bisector = useMemo(() => d3.bisector((d: Pair) => d[0]), []);\r\n  const transformed = useRef([] as Pair[]);\r\n\r\n  useEffect(() => {\r\n    currentScaleX.domain(scaleX.domain()).range(scaleX.range());\r\n  });\r\n\r\n  const update = () => {\r\n    // Adjust the input scale domain for current time.\r\n    const now = Date.now();\r\n    const [start, end] = currentScaleX\r\n      .domain(scaleX.domain().map(x => x + now))\r\n      .domain();\r\n    const timespan = end - start;\r\n\r\n    // Find indices in buffer corresponding to [start, end] times.\r\n    const history = extraHistory * timespan;\r\n    const left = bisector.left(buffer, start - history);\r\n    const right = bisector.right(buffer, end, left);\r\n\r\n    // Pad indices a little so the edge-jitter of the spline is not visible.\r\n    const pad = 2;\r\n    const padRight = clamp(right + pad, [, buffer.length]);\r\n    const padLeft = clamp(left - pad, [0]);\r\n\r\n    // Slice the view of the buffer.\r\n    const view = buffer.slice(padLeft, padRight);\r\n\r\n    // TODO: If I have a lot of free time, add striding to the view, with consistent phase.\r\n\r\n    // Set y-axis scaling for view\r\n    if (view.length) {\r\n      set({ extent: d3.extent(view, d => d[1]) as Pair });\r\n    }\r\n\r\n    scaleY.domain(extent.value);\r\n    transformed.current = view.map(\r\n      ([x, y]): Pair => [currentScaleX(x), scaleY(y)]\r\n    );\r\n  };\r\n\r\n  return [transformed, update, currentScaleX] as [\r\n    typeof transformed,\r\n    typeof update,\r\n    typeof currentScaleX\r\n  ];\r\n});\r\n","import { required } from 'utils/DefaultProps';\r\nimport Denque from 'denque';\r\nimport { Pair } from 'utils/Pair';\r\nimport { RelativeCoordinates } from 'utils/canvas/EnhancedContext';\r\nimport { useEffect } from 'react';\r\nimport { deriveCoordinates } from 'utils/coordinates';\r\nimport { useView } from './useView';\r\nimport { REF } from 'utils/easier';\r\n\r\nconst Args = required<{\r\n  buffer: Denque<Pair>;\r\n  scaleX: d3.ScaleLinear<number, number>;\r\n  scaleY: d3.ScaleLinear<number, number>;\r\n  timespan: REF<number>;\r\n  dims: REF<DOMRect>;\r\n  padDomain: number;\r\n  padRange: RelativeCoordinates;\r\n}>();\r\n\r\nexport const useLine = Args.wrap(\r\n  ({ timespan, dims, padDomain, padRange, ...init }) => {\r\n    useEffect(() => {\r\n      const { x: padX, y: padY } = deriveCoordinates.call(\r\n        dims.current,\r\n        padRange\r\n      );\r\n      init.scaleX.domain([-timespan.current - padDomain, -padDomain]);\r\n      init.scaleX.range([padX, dims.current.width - padX]);\r\n      init.scaleY.range([padY, dims.current.height - padY]);\r\n    });\r\n\r\n    const [view, update, currentScaleX] = useView(init);\r\n    return { view, update, currentScaleX, ...init };\r\n  }\r\n);\r\n","const identity = <T = any>(arg: T) => arg;\r\nexport default identity;\r\n","import { Pair } from 'utils/Pair';\r\nimport identity from './identity';\r\n\r\nexport const diff = <T>(d: Pair<T>, convert: (x: T) => any = identity) =>\r\n  +convert(d[1]) - +convert(d[0]);\r\n","import React, { SVGAttributes } from 'react';\r\nimport { declare, required, defaults } from 'utils/DefaultProps';\r\nimport * as d3 from 'd3';\r\nimport { diff } from 'utils/diff';\r\nimport { Pair } from 'utils/Pair';\r\nimport clamp from 'utils/clamp';\r\nimport { REF } from 'utils/easier';\r\nimport { OpaqueInterpolation, animated, interpolate } from 'react-spring';\r\n\r\nconst Args = declare(\r\n  required<{\r\n    clock: OpaqueInterpolation<number>;\r\n    scale: d3.ScaleLinear<number, number>;\r\n    timespan: REF<number>;\r\n    dims: REF<DOMRect>;\r\n    count: number;\r\n  }>(),\r\n  defaults({\r\n    textStyle: {\r\n      fill: '#888',\r\n      style: {\r\n        font: '14px ubuntu mono, monospace',\r\n      },\r\n    } as SVGAttributes<SVGTextElement>,\r\n    lineStyle: {\r\n      stroke: '#444',\r\n    } as SVGAttributes<SVGLineElement>,\r\n  })\r\n);\r\n\r\nexport const useTicks = Args.wrap(\r\n  ({ clock, scale, timespan, dims, count, textStyle, lineStyle }) => {\r\n    const currentScale = d3.scaleTime();\r\n    const format = currentScale.tickFormat();\r\n\r\n    const data = clock.interpolate(() => {\r\n      currentScale.domain(scale.domain()).range(scale.range());\r\n      const span = diff(currentScale.domain() as Pair<Date>, x => x.getTime());\r\n      const every = clamp(span / timespan.current, [1]);\r\n      const ticks = currentScale.ticks(d3.timeSecond.every(every)!);\r\n      const gap = diff(ticks.slice(0, 2) as Pair<Date>, currentScale) || 0;\r\n      const pad = clamp(0.05 * gap, [1]);\r\n      const height = dims.current.height;\r\n\r\n      return { ticks, pad, height };\r\n    });\r\n\r\n    const Ticks = required<SVGAttributes<SVGGElement>>().wrap(props => (\r\n      <g {...props}>\r\n        {[...Array(count)].map((_, i) => {\r\n          const tick = data.interpolate<Date | 0>(data => data.ticks[i] || 0);\r\n          const t = tick.interpolate(tick => currentScale(tick));\r\n          const height = data.interpolate(data => data.height);\r\n          const pad = data.interpolate(data => data.pad);\r\n          return (\r\n            <animated.g\r\n              key={i}\r\n              transform={t.interpolate(t => `translate(${t},0)`)}\r\n              visibility={tick.interpolate<string>(tick =>\r\n                tick !== 0 ? 'visible' : 'hidden'\r\n              )}\r\n            >\r\n              <animated.line y2={height} {...lineStyle} />\r\n              <animated.text\r\n                x={pad}\r\n                y={interpolate([height, pad], (height, pad) => height - pad)}\r\n                {...textStyle}\r\n              >\r\n                {tick.interpolate(tick => format(tick as Date))}\r\n              </animated.text>\r\n            </animated.g>\r\n          );\r\n        })}\r\n      </g>\r\n    ));\r\n\r\n    const ticks = data.interpolate(data => data.ticks);\r\n\r\n    return [Ticks, ticks, currentScale] as [\r\n      typeof Ticks,\r\n      typeof ticks,\r\n      typeof currentScale\r\n    ];\r\n  }\r\n);\r\n","import { useMemo, useEffect, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\nimport { required, declare, defaults } from 'utils/DefaultProps';\r\nimport { Pair } from 'utils/Pair';\r\nimport noop from 'utils/noop';\r\nimport { REF, CREF } from 'utils/easier';\r\nimport { diff } from '../../utils/diff';\r\n\r\nconst Args = declare(\r\n  required<{\r\n    scale: d3.ScaleLinear<number, number>;\r\n    svgRef: CREF<SVGSVGElement>;\r\n    dims: REF<{ width: number; height: number }>;\r\n  }>(),\r\n  defaults({\r\n    dblclick: 150, // ms\r\n  })\r\n);\r\n\r\nconst slope = (s: d3.ScaleLinear<number, number>) =>\r\n  diff(s.range() as Pair) / diff(s.domain() as Pair);\r\nconst avg = (values: number[]) =>\r\n  values.length ? values.reduce((a, x) => a + x, 0) / values.length : 0;\r\ntype Zoom = d3.ZoomBehavior<SVGSVGElement, any>;\r\n\r\nexport const useControls = Args.wrap(({ scale, svgRef, dims, dblclick }) => {\r\n  const baseScale = scale.copy();\r\n  const effect = useRef(noop);\r\n\r\n  const zoom: Zoom = useMemo(\r\n    () => d3.zoom<SVGSVGElement, any>().scaleExtent([1 / 5, 1]),\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    const width = dims.current.width;\r\n    zoom.extent([[0, 0], [width, 0]]);\r\n    zoom.translateExtent([[-Infinity, 0], [width, 0]]);\r\n    baseScale.domain(scale.domain()).range(scale.range());\r\n  });\r\n\r\n  useEffect(() => {\r\n    const selection = d3.select(svgRef.current!);\r\n\r\n    zoom\r\n      .on('zoom', () => {\r\n        const t = d3.event.transform as d3.ZoomTransform;\r\n        scale.domain(t.rescaleX(baseScale).domain());\r\n      })\r\n      .duration(dblclick);\r\n\r\n    const paused = (at: number) => () => {\r\n      const delta = Date.now() - at;\r\n      at += delta;\r\n      const dx = delta * slope(baseScale);\r\n      zoom.translateBy(selection, dx, 0);\r\n    };\r\n    let clickID = NaN;\r\n    type States = 'unpaused' | 'waiting' | 'paused' | 'cancelling';\r\n    let state: States = 'unpaused';\r\n    const nextState = (s: States) => {\r\n      const prevState = state;\r\n      switch ((state = s)) {\r\n        case 'unpaused': {\r\n          effect.current = noop;\r\n          break;\r\n        }\r\n        case 'waiting': {\r\n          if (prevState === 'waiting') break;\r\n          const from = { unpaused: 'paused', paused: 'unpaused' } as {\r\n            [k: string]: States;\r\n          };\r\n          clickID = window.setTimeout(() => {\r\n            nextState(from[prevState]);\r\n          }, dblclick);\r\n          break;\r\n        }\r\n        case 'paused': {\r\n          effect.current = paused(Date.now());\r\n          break;\r\n        }\r\n        case 'cancelling': {\r\n          window.clearTimeout(clickID);\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    const factor = 0.33; // adjust duration calculated by d3.interpolateZoom\r\n    const reset = () => {\r\n      const t = d3.zoomTransform(svgRef.current!);\r\n      const width = diff(scale.range() as Pair);\r\n      const cx = t.x + width / 2;\r\n      const duration =\r\n        factor *\r\n        d3.interpolateZoom(\r\n          [cx, 0, width],\r\n          [avg(baseScale.range()), 0, diff(baseScale.range() as Pair)]\r\n        ).duration;\r\n      selection\r\n        .transition()\r\n        .duration(duration)\r\n        .call(zoom.transform, d3.zoomIdentity);\r\n    };\r\n\r\n    selection\r\n      .call(zoom)\r\n      .on('dblclick.zoom', () => {\r\n        reset();\r\n        nextState('cancelling');\r\n        nextState('unpaused');\r\n      })\r\n      .on('click', () => nextState('waiting'));\r\n\r\n    return () => selection.on('.zoom', null);\r\n  });\r\n\r\n  const update = () => effect.current();\r\n  return update;\r\n});\r\n","import { useCounter, useSilentCounter } from 'utils/CustomHooks';\r\nimport { useEffect, useRef } from 'react';\r\nimport noop from 'utils/noop';\r\nimport { defaults } from 'utils/DefaultProps';\r\n\r\nconst batchMap = new Map<number, FrameRequestCallback[]>();\r\n\r\nexport const Args = defaults({ silent: true, interval: 16, batch: NaN });\r\n\r\nexport function useAnimationFrame(\r\n  f: FrameRequestCallback = noop,\r\n  options = {},\r\n  inputs?: React.InputIdentityList\r\n) {\r\n  const { silent, interval, batch } = Args(options);\r\n\r\n  const firstTime = useRef(true);\r\n  useEffect(() => {\r\n    if (firstTime.current) {\r\n      firstTime.current = false;\r\n    } else {\r\n      console.error(\r\n        \"Options passed to useAnimationFrame were toggled in the same lifecycle of the component. Don't do this! Options must be kept constant or React hooks won't work.\"\r\n      );\r\n    }\r\n  }, [silent, interval, batch]);\r\n\r\n  const [, nextFrame] = silent ? useSilentCounter() : useCounter();\r\n\r\n  useEffect(() => {\r\n    let id: number;\r\n    const tail =\r\n      interval == 16\r\n        ? (callback: FrameRequestCallback) =>\r\n            (id = window.requestAnimationFrame(callback))\r\n        : (callback: FrameRequestCallback) =>\r\n            (id = window.setTimeout(callback, interval));\r\n\r\n    const tracks = isFinite(batch)\r\n      ? batchMap.has(batch)\r\n        ? (batchMap.get(batch)!.push(f), batchMap.get(batch)!)\r\n        : batchMap.set(batch, [f]).get(batch)!\r\n      : batchMap.set(batchMap.size, [f]).get(batchMap.size - 1)!;\r\n\r\n    const loop = (ts: number) => {\r\n      const now = ts || performance.now();\r\n      tracks.forEach(g => g(now));\r\n      nextFrame();\r\n      tail(loop);\r\n    };\r\n\r\n    if (interval == 16) {\r\n      id = window.requestAnimationFrame(loop);\r\n      return () => window.cancelAnimationFrame(id);\r\n    } else {\r\n      id = window.setTimeout(loop, interval);\r\n      return () => window.clearTimeout(id);\r\n    }\r\n  }, inputs);\r\n}\r\n","import { useRef, useCallback } from 'react';\r\n\r\nexport function useSilentCounter(initial: number = 0): [number, () => void] {\r\n  const value = useRef(initial);\r\n  const increment = useCallback(() => value.current++, []);\r\n  return [value.current, increment];\r\n}\r\n","import { useAnimationFrame, Args as FrameArgs } from './useAnimationFrame';\r\nimport { useSpring } from 'react-spring';\r\nimport { defaults } from 'utils/DefaultProps';\r\n\r\nconst Args = FrameArgs.extend(\r\n  defaults({\r\n    // interval: 750,\r\n  })\r\n);\r\n\r\nexport const useAnimationClock = Args.wrap(args => {\r\n  const [{ clock }, update] = useSpring(() => ({\r\n    clock: 0,\r\n    immediate: true,\r\n  }));\r\n  useAnimationFrame(() => {\r\n    update({ clock: clock.value + args.interval });\r\n  }, args);\r\n  return clock;\r\n});\r\n","import React, { useRef, useEffect } from 'react';\r\nimport { GoodCanvasChild } from 'components/GoodCanvas';\r\nimport { Points } from 'components/usePoints';\r\nimport { Line } from 'components/Line';\r\nimport { useDataFeed } from './useDataFeed';\r\nimport { useView } from './useView';\r\nimport { useLine } from './useLine';\r\nimport {\r\n  clear,\r\n  getContext,\r\n  CanvasEffect,\r\n  newEffect,\r\n  EffectOptions,\r\n  RelativeCoordinates,\r\n} from 'utils/canvas';\r\nimport { useDash } from './useDash';\r\nimport { useFPS } from './useFPS';\r\nimport { useTimespan } from './useTimespan';\r\nimport { useClip } from './useClip';\r\nimport { useTicks } from './useTicks';\r\nimport { useControls } from './useControls';\r\nimport { usePaddingSpring } from './usePaddingSpring';\r\nimport * as d3 from 'd3';\r\nimport { diff } from 'utils/diff';\r\nimport { Pair } from 'utils/Pair';\r\nimport clamp from 'utils/clamp';\r\nimport { useGlow } from 'components/Glow';\r\nimport { defaults, declare, required } from 'utils/DefaultProps';\r\nimport { REF, CREF } from 'utils/easier';\r\nimport { animated, AnimatedValue, OpaqueInterpolation } from 'react-spring';\r\nimport { deriveCoordinates } from 'utils/coordinates';\r\nimport Denque from 'denque';\r\nimport { number } from 'prop-types';\r\nimport noop from 'utils/noop';\r\nimport { useAnimationClock } from './useAnimationClock';\r\n\r\nconst Args = declare(\r\n  required<{\r\n    svgRef: CREF<SVGSVGElement>;\r\n    channelNames: string[];\r\n  }>()\r\n);\r\n\r\nexport const _IVPlot = Args.wrap(({ svgRef, channelNames }) => {\r\n  const clock = useAnimationClock();\r\n  const samplePeriod = 400;\r\n\r\n  const dims = useRef<DOMRect>({ width: 0, height: 0 } as DOMRect);\r\n  const timespan = useRef(0);\r\n  const speed = 100;\r\n  useEffect(() => {\r\n    dims.current = svgRef.current!.getBoundingClientRect() as DOMRect;\r\n    timespan.current = dims.current.width / (speed / 1000);\r\n  });\r\n\r\n  const padDomain = 4 * samplePeriod;\r\n  const padRange = { y: { height: 0.1 } };\r\n\r\n  const amps = useLine({\r\n    buffer: useDataFeed({\r\n      samplePeriod: samplePeriod,\r\n      maxSize: 500,\r\n      pusher: {\r\n        channelName: channelNames[0],\r\n      },\r\n    }),\r\n    scaleX: d3.scaleLinear(),\r\n    scaleY: d3.scaleLinear(),\r\n    timespan,\r\n    dims,\r\n    padDomain,\r\n    padRange,\r\n  });\r\n\r\n  const volts = useLine({\r\n    buffer: useDataFeed({\r\n      samplePeriod: samplePeriod,\r\n      maxSize: 500,\r\n      pusher: {\r\n        channelName: channelNames[1],\r\n      },\r\n    }),\r\n    scaleX: amps.scaleX,\r\n    scaleY: d3.scaleLinear(),\r\n    timespan,\r\n    dims,\r\n    padDomain,\r\n    padRange,\r\n  });\r\n\r\n  const updateControls = useControls({ scale: amps.scaleX, svgRef, dims });\r\n\r\n  const numTicks = 25;\r\n  const [Ticks, ticks, ticksScale] = useTicks({\r\n    ...{ clock, scale: amps.currentScaleX, timespan, dims, count: numTicks },\r\n  });\r\n\r\n  const line = d3.line().curve(d3.curveCatmullRom.alpha(0.5));\r\n\r\n  const sideClip = 0.2;\r\n\r\n  const start = performance.now();\r\n  let count = 0;\r\n  return (\r\n    <>\r\n      <animated.g visibility='hidden'>\r\n        {clock.interpolate(() => {\r\n          // (count % 180 == 0 ? console.clear() : 0) ||\r\n          //   console.log((++count / (performance.now() - start)) * 1000);\r\n          Object.assign(window, {\r\n            svgRef,\r\n            view: amps.view,\r\n            currentScaleX: amps.currentScaleX,\r\n            timespan: timespan.current,\r\n            amps,\r\n            dims,\r\n          });\r\n\r\n          updateControls();\r\n          amps.update();\r\n          volts.update();\r\n        })}\r\n      </animated.g>\r\n      <clipPath id='inside'>\r\n        <animated.rect\r\n          x={clock.interpolate(() => dims.current.height * sideClip)}\r\n          width={clock.interpolate(\r\n            () => dims.current.width - 2 * dims.current.height * sideClip\r\n          )}\r\n          height='100%'\r\n        />\r\n      </clipPath>\r\n      <clipPath id='outside'>\r\n        <animated.rect\r\n          width={clock.interpolate(() => dims.current.height * sideClip)}\r\n          height='100%'\r\n        />\r\n        <animated.rect\r\n          x={clock.interpolate(\r\n            () => dims.current.width - dims.current.height * sideClip\r\n          )}\r\n          width={clock.interpolate(() => dims.current.height * sideClip)}\r\n          height='100%'\r\n        />\r\n      </clipPath>\r\n      <Ticks />\r\n      <g clipPath='url(#inside)'>\r\n        <Line data={amps.view} clock={clock} line={line} />\r\n        <Points\r\n          ticks={ticks}\r\n          ticksScale={ticksScale}\r\n          scaleY={amps.scaleY}\r\n          data={amps.view}\r\n          count={numTicks}\r\n          curve={line.curve() as d3.CurveCatmullRomFactory}\r\n        />\r\n        <Line\r\n          stroke='hsl(210, 100%, 67%)'\r\n          data={volts.view}\r\n          clock={clock}\r\n          line={line}\r\n        />\r\n        <Points\r\n          circleStyle={{\r\n            fill: 'hsl(210, 100%, 75%)',\r\n            stroke: 'hsl(210, 100%, 50%)',\r\n          }}\r\n          textStyle={{ fill: 'hsl(210, 100%, 75%)' }}\r\n          ticks={ticks}\r\n          ticksScale={ticksScale}\r\n          scaleY={volts.scaleY}\r\n          data={volts.view}\r\n          count={numTicks}\r\n          curve={line.curve() as d3.CurveCatmullRomFactory}\r\n        />\r\n      </g>\r\n      <g clipPath='url(#outside)'>\r\n        <Line\r\n          data={amps.view}\r\n          clock={clock}\r\n          line={line}\r\n          strokeDasharray='4 6'\r\n          strokeDashoffset={clock.interpolate(t => t / 20)}\r\n        />\r\n        <Line\r\n          strokeDasharray='4 6'\r\n          strokeDashoffset={clock.interpolate(t => t / 20)}\r\n          stroke='hsl(210, 100%, 67%)'\r\n          data={volts.view}\r\n          clock={clock}\r\n          line={line}\r\n        />\r\n      </g>\r\n    </>\r\n  );\r\n\r\n  // const volts = {\r\n  //   buffer: useDataFeed({\r\n  //     samplePeriod: samplePeriod,\r\n  //     maxSize: 40,\r\n  //   }),\r\n  //   scaleX: amps.scaleX,\r\n  //   scaleY: d3.scaleLinear(),\r\n  // };\r\n\r\n  // const {\r\n  //   view: voltsView,\r\n  //   update: updateVoltsView,\r\n  //   currentScaleX\r\n  // } = useView(volts);\r\n\r\n  // const LabelsArgs = declare(\r\n  //   required<{ data: REF<Pair[]>; scaleY: d3.ScaleLinear<number, number> }>(),\r\n  //   defaults({ style: { font: '14px ubuntu mono, monospace' } })\r\n  // );\r\n\r\n  // const useLabels = LabelsArgs.wrap(({ data, scaleY, ...effectOptions }) => {\r\n  //   const format = (x: number) => x.toFixed(1); //d3.format('.1f');\r\n  //   return newEffect(\r\n  //     ctx => {\r\n  //       const pad = clamp(0.01 * ctx.height, [1]);\r\n  //       for (const [x, y] of data.current) {\r\n  //         ctx.fillText(format(scaleY.invert(y)), x + pad, y - pad);\r\n  //       }\r\n  //     },\r\n  //     { ...effectOptions }\r\n  //   );\r\n  // });\r\n\r\n  // const dashed = useDash({ segments: [4, 6], period: 1000 });\r\n  // const inside = useClip({ by: { height: 0.1 } });\r\n  // const outside = useClip({ by: { height: 0.1 }, invert: true });\r\n  // const glow1 = useGlow({\r\n  //   spread: 0.5,\r\n  //   blur: 10,\r\n  //   color: 'hsl(330, 100%, 50%)',\r\n  // });\r\n  // const glow2 = useGlow({\r\n  //   spread: 0.5,\r\n  //   blur: 10,\r\n  //   color: 'hsl(210, 100%, 50%)',\r\n  // });\r\n  // // const line = useLine({\r\n  // //   data: ampsView,\r\n  // //   style: { strokeStyle: 'hsl(330, 100%, 67%)' },\r\n  // // });\r\n  // const points = usePoints({ data: ampsView });\r\n  // // const line2 = useLine({\r\n  // //   data: voltsView,\r\n  // //   style: { strokeStyle: 'hsl(210, 100%, 67%)' },\r\n  // // });\r\n  // const points2 = usePoints({\r\n  //   data: voltsView,\r\n  //   style: {\r\n  //     fillStyle: 'hsl(210, 100%, 75%)',\r\n  //     strokeStyle: 'hsl(210, 100%, 50%)',\r\n  //   },\r\n  // });\r\n\r\n  // const animations: CanvasEffect[] = [\r\n  //   updateZoomedScale,\r\n  //   updateAmpsView,\r\n  //   updateVoltsView,\r\n  //   clear,\r\n  //   useTicks({ viewScale }),\r\n  //   // outside(dashed(line), dashed(line2)),\r\n  //   inside(\r\n  //     // line,\r\n  //     points(useLabels({ data: ampsView, scaleY })),\r\n  //     // line2,\r\n  //     points2(useLabels({ data: voltsView, scaleY: scaleY2 }))\r\n  //   ),\r\n  //   useFPS({\r\n  //     offset: { x: { height: -0.1 }, y: { height: -0.9 } },\r\n  //     style: { fillStyle: 'hsl(90, 75%, 50%)' },\r\n  //   }),\r\n  // ];\r\n\r\n  // // let n = 0;\r\n  // useAnimationFrame(\r\n  //   ts => {\r\n  //     const { ctx } = getContext(props.canvasRef);\r\n  //     animations.forEach(e => e(ctx));\r\n  //     // console.log('frame:', ++n, 'ts:', ts);\r\n  //   }\r\n  //   // ,{ batch: 0, interval: 500 }\r\n  // );\r\n\r\n  // return null;\r\n});\r\n","import { withImm } from 'utils/Imm';\r\n\r\nexport interface Args {\r\n  event: string;\r\n  customEvent: string;\r\n  _window?: typeof window;\r\n}\r\n\r\nexport const defaultArgs = {\r\n  _window: window,\r\n};\r\n\r\nconst throttle = (args: Args) => {\r\n  // unpack args\r\n  const { _window } = withImm.mergeIntersect(defaultArgs, args);\r\n  const { event, customEvent } = args;\r\n\r\n  if (!event) throw Error('`event` should not be blank');\r\n  if (!customEvent) throw Error('`customEvent` should not be blank');\r\n\r\n  let ready = true;\r\n\r\n  const dispatcher = () => {\r\n    // dispatchEvent is synchronous (waits for event listener to finish running)\r\n    _window!.dispatchEvent(new CustomEvent(customEvent));\r\n    ready = true;\r\n  };\r\n\r\n  const throttler = () => {\r\n    if (ready) {\r\n      ready = false;\r\n      requestAnimationFrame(dispatcher);\r\n    }\r\n  };\r\n\r\n  _window!.addEventListener(event, throttler, { passive: true });\r\n\r\n  const cleanup = () => {\r\n    _window!.removeEventListener(event, throttler);\r\n  };\r\n\r\n  return cleanup;\r\n};\r\n\r\nexport const optimizedResize = 'optimized-resize';\r\nthrottle({ event: 'resize', customEvent: optimizedResize });\r\n\r\nexport default throttle;\r\n","import React, { useEffect } from 'react';\r\nimport { optimizedResize } from 'utils/throttleEvent';\r\nimport { useThrottled } from 'utils/CustomHooks';\r\nimport { BaseProps } from 'utils/BaseProps';\r\nimport { declare, defaults } from 'utils/DefaultProps';\r\nimport { REF } from 'utils/easier';\r\nimport { animated, useSpring } from 'react-spring';\r\n\r\nexport const Props = declare(\r\n  defaults({\r\n    radius: 5,\r\n    timeout: 250,\r\n    enabled: true,\r\n    style: { filter: '' } as typeof BaseProps.propsOut.style,\r\n  }),\r\n  BaseProps\r\n);\r\n\r\nexport const OwnProps = declare(Props.own);\r\n\r\nconst Blur = Props.wrap(\r\n  ({ children, style, radius, timeout, enabled }, ref: REF<HTMLDivElement>) => {\r\n    const [{ filter }, update] = useSpring(() => ({\r\n      filter: `${style.filter} blur(0px)`,\r\n      from: {\r\n        filter: `${style.filter} blur(${radius}px)`,\r\n      },\r\n      config: { duration: 250 },\r\n    }));\r\n\r\n    // attach handler to blur on window resize\r\n    useThrottled(\r\n      {\r\n        event: optimizedResize,\r\n        first: () =>\r\n          update({\r\n            filter: `${style.filter} blur(${enabled ? radius : 0}px)`,\r\n          }),\r\n        last: () =>\r\n          update({\r\n            filter: `${style.filter} blur(0px)`,\r\n          }),\r\n        timeout,\r\n      },\r\n      [timeout]\r\n    );\r\n\r\n    // attach handler to blur on visibility change\r\n    useEffect(() => {\r\n      const handler = () => {\r\n        update({\r\n          filter: `${style.filter} blur(${\r\n            enabled && document.hidden ? radius : 0\r\n          }px)`,\r\n        });\r\n      };\r\n      document.addEventListener('visibilitychange', handler);\r\n      return () => document.removeEventListener('visibilitychange', handler);\r\n    }, [style.filter, enabled, radius]);\r\n\r\n    return (\r\n      <animated.div\r\n        ref={ref}\r\n        style={{\r\n          ...style,\r\n          filter,\r\n        }}\r\n      >\r\n        {children}\r\n      </animated.div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default React.forwardRef(Blur);\r\n","import React, { useRef, useEffect, useState } from 'react';\r\nimport { _IVPlot } from './_IVPlot';\r\nimport { defaults, required } from 'utils/DefaultProps';\r\nimport Blur, { Props as BlurProps } from 'components/Blur';\r\nimport { useThrottled, useCounter } from 'utils/CustomHooks';\r\nimport { optimizedResize } from 'utils/throttleEvent';\r\nimport { Omit } from 'utils/meta';\r\n\r\n/* interface ModeType {\r\n  style: React.CSSProperties | {};\r\n  current: {\r\n    line: {\r\n      canvasStyle?: CanvasRenderingContext2D | {};\r\n    };\r\n    points: {\r\n      canvasStyle?: CanvasRenderingContext2D | {};\r\n    };\r\n  };\r\n}\r\n\r\nexport const lightMode: ModeType = {\r\n  style: { backgroundColor: 'transparent' },\r\n  current: {\r\n    line: {\r\n      canvasStyle: { strokeStyle: 'hsl(330, 100%, 75%)' },\r\n      // glow: { blurRadius: 10, color: 'hsl(330, 100%, 50%)' },\r\n    },\r\n    points: {\r\n      canvasStyle: { strokeStyle: 'hsl(330, 100%, 75%)' },\r\n      // glow: { blurRadius: 10, color: 'hsl(330, 100%, 50%)' },\r\n    },\r\n  },\r\n}; */\r\n\r\nexport const Props = BlurProps.extend(\r\n  required<Omit<typeof _IVPlot.required, 'svgRef'>>(),\r\n  defaults({\r\n    style: {\r\n      position: 'relative',\r\n      width: '100%',\r\n      height: '100%',\r\n      borderRadius: '5px',\r\n      // border: '10px solid blue',\r\n      backgroundColor: '#040404',\r\n    },\r\n  })\r\n);\r\n\r\nconst IVPlot = Props.wrap(({ channelNames, ...rest }) => {\r\n  const svgRef = useRef<SVGSVGElement>(null);\r\n\r\n  // Re-render on resize\r\n  const [, tick] = useCounter();\r\n  useThrottled(\r\n    {\r\n      event: optimizedResize,\r\n      last: tick,\r\n    },\r\n    []\r\n  );\r\n\r\n  return (\r\n    <Blur {...rest}>\r\n      <svg ref={svgRef} width='100%' height='100%'>\r\n        <_IVPlot channelNames={channelNames} svgRef={svgRef} />\r\n      </svg>\r\n    </Blur>\r\n  );\r\n});\r\n\r\nexport default IVPlot;\r\n\r\n/* \r\n// canvasStyle={lightMode.current.line.canvasStyle}\r\n      // glow={lightMode.current.line.glow}\r\n*/\r\n// blur={{ radius: 10 }}\r\n// canvasStyle={lightMode.current.points.canvasStyle}\r\n// glow={lightMode.current.points.glow}\r\n","import React from 'react';\r\nexport const Wifi = props => {\r\n  const bars = [\r\n    null,\r\n    <path d=\"M 12 18 C 11.5 18 10.992188 18.199219 10.59375 18.5 L 12 20 L 13.40625 18.5 C 13.007813 18.199219 12.5 18 12 18 Z\" />,\r\n    <path d=\"M 12 13 C 10.148438 13 8.484375 13.726563 7.21875 14.875 L 8.5625 16.34375 C 9.496094 15.492188 10.648438 15 12 15 C 13.351563 15 14.503906 15.492188 15.4375 16.34375 L 16.78125 14.875 C 15.515625 13.726563 13.851563 13 12 13 Z \" />,\r\n    <path d=\"M 12 8 C 8.847656 8 5.988281 9.214844 3.8125 11.28125 L 5.1875 12.71875 C 7.011719 10.984375 9.351563 10 12 10 C 14.625 10 17 11.089844 18.84375 12.75 L 20.15625 11.25 C 18 9.308594 15.175781 8 12 8 Z \" />,\r\n    <path d=\"M 12 3 C 7.546875 3 3.398438 4.707031 0.40625 7.59375 L 1.78125 9.03125 C 4.390625 6.515625 8.054688 5 12 5 C 15.945313 5 19.492188 6.492188 22.21875 9.03125 L 23.59375 7.5625 C 20.519531 4.699219 16.453125 3 12 3 Z \" />,\r\n  ];\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n      }}\r\n    >\r\n      <svg\r\n        viewBox=\"0 0 24 24\"\r\n        style={{\r\n          width: '1em',\r\n          height: '1em',\r\n          fill: 'white',\r\n        }}\r\n      >\r\n        {React.Children.map(bars, (e, i) => {\r\n          if (!React.isValidElement(e)) return;\r\n          const opacity = i <= props.level ? 1 : 0.3;\r\n          return React.cloneElement(e, { style: { opacity } });\r\n        })}\r\n      </svg>\r\n      <div style={{ marginLeft: '1ex' }}>utexas</div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nexport function Time() {\r\n  const [, setState] = useState(null);\r\n  useEffect(() => {\r\n    const animate = () => {\r\n      setState(() => null);\r\n      requestAnimationFrame(animate);\r\n    };\r\n    let id = requestAnimationFrame(animate);\r\n    return () => cancelAnimationFrame(id);\r\n  }, []);\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'absolute',\r\n        left: '50%',\r\n        transform: 'translateX(-50%)',\r\n      }}\r\n    >\r\n      {new Date().toLocaleTimeString()}\r\n    </div>\r\n  );\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M 12 1 C 8.6761905 1 6 3.6761905 6 7 L 6 8 C 4.9 8 4 8.9 4 10 L 4 20 C 4 21.1 4.9 22 6 22 L 18 22 C 19.1 22 20 21.1 20 20 L 20 10 C 20 8.9 19.1 8 18 8 L 18 7 C 18 3.6761905 15.32381 1 12 1 z M 12 3 C 14.27619 3 16 4.7238095 16 7 L 16 8 L 8 8 L 8 7 C 8 4.7238095 9.7238095 3 12 3 z M 12 13 C 13.1 13 14 13.9 14 15 C 14 16.1 13.1 17 12 17 C 10.9 17 10 16.1 10 15 C 10 13.9 10.9 13 12 13 z\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\"\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/lock.9b40595e.svg\";\nexport { SvgComponent as ReactComponent };","import React from 'react';\r\nimport { ReactComponent as Lock } from './lock.svg';\r\nexport function Login(props) {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n      }}\r\n    >\r\n      <Lock\r\n        style={{\r\n          width: '1em',\r\n          height: '1em',\r\n          fill: 'white',\r\n        }}\r\n      />\r\n      <div style={{ marginLeft: '1ex' }}> Welcome, {props.username}</div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Wifi } from './Wifi';\r\nimport { Time } from './Time';\r\nimport { Login } from './Login';\r\nconst TitleBar = props => {\r\n  const [state, setState] = useState({ level: 4, username: 'Dr. Santoso' });\r\n  useEffect(() => {\r\n    let count = 0;\r\n    const animate = () => {\r\n      count++;\r\n      setState(({ level, username }) => {\r\n        return {\r\n          level: Math.round(Math.random() * 5),\r\n          username:\r\n            count % 4 === 0 ? username.slice(1) + username[0] : username,\r\n        };\r\n      });\r\n      requestAnimationFrame(animate);\r\n    };\r\n    // let id = requestAnimationFrame(animate);\r\n    // return () => cancelAnimationFrame(id);\r\n  }, []);\r\n  return (\r\n    <div\r\n      style={{\r\n        font: '1em monospace',\r\n        lineHeight: '1.25em',\r\n        backgroundColor: '#222',\r\n        color: 'white',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        paddingLeft: '2ex',\r\n        paddingRight: '2ex',\r\n        position: 'relative',\r\n      }}\r\n    >\r\n      <Wifi level={state.level} />\r\n      <Time />\r\n      <Login username={state.username} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TitleBar;\r\n","import React, { Component, SVGAttributes } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport IVPlot from 'components/IVPlot';\nimport TitleBar from 'components/TitleBar';\n\nconst CircleDumby = (props: SVGAttributes<SVGElement>) => {\n  const progress = Math.random() * 0.3 + 0.7;\n  const C = Math.PI * 2 * 49;\n\n  return (\n    <svg viewBox='0 0 100 100' {...props}>\n      <circle\n        cx='50'\n        cy='50'\n        r='49'\n        fill='none'\n        stroke='green'\n        strokeWidth='2'\n        strokeDasharray={`${C} ${C}`}\n        strokeDashoffset={(1 - progress) * C}\n        transform='rotate(-90 50 50)'\n      />\n      <text\n        x='50'\n        y='45'\n        fill='white'\n        style={{ fontFamily: 'ubuntu mono, monospace' }}\n        fontSize='40'\n      >\n        <tspan textAnchor='middle' alignmentBaseline='middle'>\n          {(progress * 100).toFixed(0)}\n        </tspan>\n        <tspan alignmentBaseline='baseline' fontSize='15' dy='-5'>\n          %\n        </tspan>\n        <tspan\n          x='50'\n          y='72.5'\n          fontSize='10'\n          textAnchor='middle'\n          alignmentBaseline='middle'\n        >\n          MAX\n        </tspan>\n      </text>\n    </svg>\n  );\n};\n\nclass App extends Component<{}, { bleh: number }> {\n  render() {\n    return (\n      <>\n        <TitleBar />\n        <div className='main'>\n          <div className='row'>\n            <CircleDumby height='100%' />\n            <IVPlot channelNames={['ch0', 'ch1']} />\n          </div>\n          <div className='row'>\n            <CircleDumby height='100%' />\n            <IVPlot channelNames={['ch2', 'ch3']} />\n          </div>\n          <div className='row'>\n            <CircleDumby height='100%' />\n            <IVPlot channelNames={['debug', 'debug']} />\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}