{"version":3,"sources":["utils/Imm/withImm.ts","utils/warn.ts","utils/ignore.ts","utils/DefaultProps.ts","utils/BaseProps.ts","components/Line/index.tsx","utils/evaluate.ts","utils/CustomHooks/useCounter.ts","utils/noop.ts","utils/CustomHooks/useThrottled.ts","utils/CustomHooks/useDataBufferSilent.ts","utils/CustomHooks/useDecay.ts","components/IVPlot/useDataFeed.ts","utils/coordinates.ts","utils/clamp.ts","components/IVPlot/useView.ts","components/IVPlot/useLine.ts","utils/identity.ts","utils/diff.ts","components/IVPlot/useTicks.tsx","components/IVPlot/useControls.ts","components/IVPlot/useAnimationFrame.ts","utils/CustomHooks/useSilentCounter.ts","components/IVPlot/useAnimationClock.ts","components/IVPlot/_IVPlot.tsx","utils/throttleEvent.ts","components/Blur/index.tsx","components/IVPlot/index.tsx","App.tsx","serviceWorker.js","index.tsx"],"names":["ignoreUndefined","old","next","undefined","defaultMerger","_old","mergeIntersect","target","_len","arguments","length","sources","Array","_key","mergeIntersectWith","apply","concat","merger","_len2","_key2","selection","Object","keys","filter","Boolean","map","source","key","includes","reduce","obj","objectSpread","defineProperty","mergeWith","toConsumableArray","merge","_len3","_key3","_len4","_key4","_mergeDeepWith","toJS","isMergeable","a","List","isList","_len5","collections","_key5","slice","acc","x","_mergeDeep","b","nextItem","index","existingItem","get","set","fromJS","_len6","_key6","aaaaa","hello","canvasStyle","canvasEffects","bbbbb","poop","process","declare","propsClass","baseClasses","defaults","withImm","base","forEach","warn","types","required","injected","propsIn","propsOut","own","bases","extend","this","factory","props","allOptional","some","c","Wrap","classCallCheck","createClass","value","f","assign","placeholder","rest","wrap","default","optional","decorator","_class","_temp","_class2","_temp2","values","reverse","StyleProp","style","BaseProps","Line","line","fill","_ref","data","objectWithoutProperties","theLine","useMemo","expr","context","Function","k","evaluate","d3","react_default","createElement","web","path","d","interpolate","useCounter","initial","_useState","useState","_useState2","slicedToArray","setValue","useCallback","i","noop","useThrottled","timeout","first","last","inputs","event","useEffect","id","ongoing","handler","clearTimeout","window","setTimeout","addEventListener","removeEventListener","maxSize","Infinity","Args","initialValue","minDelta","maxDelta","halfLife","UpdateArgs","signal","useRef","_ref2","datum","delta","decay","Math","pow","current","isNaN","CURRENT","min","max","lo","hi","useDataFeed","_x","Date","now","random","pusher","options","cluster","forceTLS","samplePeriod","_ref2$pusher","channelName","_useDataBufferSilent","args","_withImm$merge","buffer","Denque","updateBuffer","newData","splice","useDataBufferSilent","_useDataBufferSilent2","receiveData","Pusher","subscribe","bind","_ref3","payload","unsubscribe","deriveCoordinate","coord","_coord$width","width","w","_coord$height","height","h","clamp","range","_withImm$mergeInterse","_withImm$mergeInterse2","useView","extraHistory","scaleX","scaleY","_useSpring","useSpring","extent","config","tension","friction","_useSpring2","currentScaleX","copy","bisector","transformed","domain","_currentScaleX$domain","_currentScaleX$domain2","start","end","timespan","history","left","right","padRight","padLeft","view","hist","y","useLine","dims","padDomain","padRange","init","_deriveCoordinates$ca","_ref$x","_ref$y","call","padX","padY","_useView","_useView2","update","identity","arg","diff","convert","textStyle","font","lineStyle","stroke","blank","useTicks","clock","scale","count","currentScale","format","tickFormat","span","getTime","every","ticks","gap","pad","_","tick","t","g","transform","visibility","y2","text","dblclick","useControls","svgRef","baseScale","effect","zoom","scaleExtent","translateExtent","on","rescaleX","duration","paused","at","s","dx","translateBy","clickID","NaN","state","nextState","prevState","from","unpaused","cx","transition","reset","batchMap","Map","silent","interval","batch","useAnimationFrame","_Args","firstTime","console","error","increment","useSilentCounter","nextFrame","tail","callback","requestAnimationFrame","tracks","isFinite","has","push","size","loop","ts","performance","cancelAnimationFrame","useAnimationClock","FrameArgs","immediate","_IVPlot","channelNames","getBoundingClientRect","amps","volts","updateControls","_useTicks","_useTicks2","Ticks","Fragment","defaultArgs","_window","throttle","customEvent","Error","ready","dispatcher","dispatchEvent","CustomEvent","throttler","passive","Props","radius","enabled","Blur","ref","children","document","hidden","div","React","forwardRef","IVPlot","BlurProps","position","borderRadius","backgroundColor","_useCounter","components_Blur","App","padding","components_IVPlot","Component","location","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","then","registration","unregister"],"mappings":"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","file":"static/js/main.926d049f.chunk.js","sourcesContent":["import { List, fromJS } from 'immutable';\r\nimport { ArrayToIntersectionNonNull } from 'utils/meta';\r\n\r\n// Useful merger to ignore undefined\r\n// Another difference: The merged result excludes properties not originally present in `target`\r\nexport function ignoreUndefined<V>(old: V, next: V) {\r\n  return next === undefined ? old : next;\r\n}\r\n\r\nexport function defaultMerger<V>(_old: V, next: V) {\r\n  return next;\r\n}\r\n\r\n// Like `Object.assign` but properties are merged deeply. Sources are copied not modified. Does not preserve reference equality for Immutable objects because the result is converted to a POJ. Use `_mergeDeep` to get an Immutable object back. Passing no sources will yield an empty object {}. Undefined values in `sources` are ignored (do not overwrite values in first source). Only considers own properties of objects (not properties inherited in their prototypes). Does not add new properties not originally in `target`.\r\nexport function mergeIntersect<T extends object, S extends any[]>(\r\n  target: T,\r\n  ...sources: S\r\n) {\r\n  return mergeIntersectWith(ignoreUndefined, target, ...sources) as T;\r\n}\r\n\r\n// Same as `mergeIntersect` but properties are merged deeply using the custom merge conflict resolver passed.\r\nexport function mergeIntersectWith<T extends object, S extends any[]>(\r\n  merger: <K, V>(old: V, next: V, key: K) => V,\r\n  target: T,\r\n  ...sources: S\r\n) {\r\n  // Filter out props not already present in `target`.\r\n  const selection = Object.keys(target);\r\n  sources = sources.filter(Boolean).map(source =>\r\n    // Special case for Array objects (preserve its prototype)\r\n    source instanceof Array\r\n      ? source\r\n      : Object.keys(source)\r\n          .filter(key => selection.includes(key))\r\n          .reduce((obj, key) => {\r\n            return {\r\n              ...obj,\r\n              [key]: (source as any)[key],\r\n            };\r\n          }, {})\r\n  ) as S;\r\n  return mergeWith(merger, target, ...sources) as T;\r\n}\r\n\r\n// Like `Object.assign` but properties are merged deeply. Sources are copied not modified. Does not preserve reference equality for Immutable objects because the result is converted to a POJ. Use `_mergeDeep` to get an Immutable object back. Passing no sources will yield an empty object {}. Undefined values in `sources` are ignored (do not overwrite values in first source). Only considers own properties of objects (not properties inherited in their prototypes).\r\n// Note: For some reason TypeScript doesn't recognize if you call merge() with both spread and individual arguments.\r\n// For instance `merge(...args, defaultSettings)` does not work!\r\n// My signature is probably at fault but I don't know how to fix it. (2/23/19)\r\nexport function merge<T extends any[]>(...sources: T) {\r\n  return mergeWith(ignoreUndefined, ...sources) as {\r\n    [K in keyof ArrayToIntersectionNonNull<T>]: ArrayToIntersectionNonNull<T>[K]\r\n  };\r\n}\r\n\r\n// Same as `merge` but properties are merged deeply using the custom merge conflict resolver passed.\r\nexport function mergeWith<T extends any[]>(\r\n  merger: <K, V>(old: V, next: V, key: K) => V,\r\n  ...sources: T\r\n) {\r\n  return _mergeDeepWith(merger, ...sources).toJS() as {\r\n    [K in keyof ArrayToIntersectionNonNull<T>]: ArrayToIntersectionNonNull<T>[K]\r\n  };\r\n}\r\n\r\nfunction isMergeable(a: any): a is { mergeWith: Function } {\r\n  return (\r\n    a &&\r\n    typeof a === 'object' &&\r\n    typeof a.mergeWith === 'function' &&\r\n    !List.isList(a)\r\n  );\r\n}\r\n\r\ntype Merger = <K, V>(oldVal: V, newVal: V, key?: K) => V;\r\nexport function _mergeDeepWith<T extends object[]>(\r\n  merger: Merger,\r\n  ...collections: T\r\n) {\r\n  /* \r\n  https://github.com/immutable-js/immutable-js/issues/1452#issuecomment-386162309\r\n  */\r\n  const _mergeDeep = <K, V>(a: V, b: V, key?: K): V | List<unknown> => {\r\n    // If b is null, it would overwrite a, even if a is mergeable\r\n    if (isMergeable(a) && b !== null) {\r\n      return a.mergeWith(_mergeDeep, b);\r\n    }\r\n\r\n    if (!List.isList(a) || !List.isList(b)) {\r\n      return merger(a, b, key);\r\n    }\r\n\r\n    return (b as List<unknown>).reduce(\r\n      (acc, nextItem, index) => {\r\n        const existingItem = acc.get(index);\r\n        if (isMergeable(existingItem)) {\r\n          return acc.set(index, existingItem.mergeWith(_mergeDeep, nextItem));\r\n        }\r\n\r\n        return acc.set(index, merger(existingItem, nextItem, index));\r\n      },\r\n      a as List<unknown>\r\n    );\r\n  };\r\n\r\n  return collections\r\n    .slice(1)\r\n    .reduce(\r\n      (acc, x) => _mergeDeep(acc, fromJS(x)),\r\n      fromJS(collections[0] != null ? collections[0] : {})\r\n    );\r\n}\r\n\r\nexport function _mergeDeep<T extends object[]>(...collections: T) {\r\n  return _mergeDeepWith(defaultMerger, ...collections);\r\n}\r\n\r\n// Example use:\r\nconst aaaaa = { hello: 3, canvasStyle: [1, 2, 3], canvasEffects: () => {} };\r\nconst bbbbb = { hello: 'world', canvasStyle: [3, , 1], poop: 'hiii' };\r\nconst ccccc = merge(aaaaa, bbbbb);\r\nconst ddddd = merge(...([aaaaa, bbbbb] as [typeof aaaaa, typeof bbbbb]));\r\n// const ccccc = merge();\r\n// console.log(ccccc);\r\n\r\n// Object.assign(window, {\r\n//   List,\r\n//   fromJS,\r\n//   _mergeDeepWith,\r\n//   _mergeDeep,\r\n//   merge,\r\n//   aaaaa,\r\n//   bbbbb,\r\n//   ccccc,\r\n// });\r\n","import ignore from './ignore';\r\n\r\nexport default (process.env.NODE_ENV === 'development' ? console.warn : ignore);\r\n","const ignore = (..._args: any[]) => {};\r\nexport default ignore;\r\n","import {\r\n  Omit,\r\n  Equals,\r\n  RequiredOnly,\r\n  ArrayToIntersectionNonNull,\r\n  RecursivePartial,\r\n} from './meta';\r\nimport * as withImm from './Imm/withImm';\r\nimport warn from './warn';\r\n\r\nexport type PropsClass = {\r\n  required?: object;\r\n  defaults?: object;\r\n  injected?: object;\r\n};\r\n\r\ntype Mix<T> = Pick<T, keyof T>;\r\n\r\n// Returns a factory that applies default props to props\r\nexport function declare<P extends PropsClass, S extends PropsClass[]>(\r\n  propsClass: P,\r\n  ...baseClasses: S\r\n) {\r\n  type R = P['required'] & {};\r\n  type D = P['defaults'] & {};\r\n  type I = P['injected'] & {};\r\n\r\n  type BasesR<T> = T extends PropsClass ? T['required'] : {};\r\n  type BasesD<T> = T extends PropsClass ? T['defaults'] : {};\r\n  type BasesI<T> = T extends PropsClass ? T['injected'] : {};\r\n  type BaseClasses = ArrayToIntersectionNonNull<S>;\r\n\r\n  // Properties in `propsClass.defaults` will make inherited properties with the same name optional, but will not affect properties in `propsClass.required`.\r\n  type Defaults = Mix<D & BasesD<BaseClasses>>;\r\n  type Required = Mix<R & Omit<BasesR<BaseClasses>, keyof Defaults>>;\r\n  type Injected = Mix<I & BasesI<BaseClasses>>;\r\n\r\n  // External-facing props interface\r\n  type PropsIn = Mix<\r\n    Required & RecursivePartial<Defaults> & RecursivePartial<Injected>\r\n  >;\r\n  // Internal-facing props interface\r\n  type PropsOut = Mix<Required & Defaults & Injected>;\r\n\r\n  const defaults = withImm.merge(\r\n    ...baseClasses.map(base => base.defaults),\r\n    propsClass.defaults as D\r\n  ) as Defaults;\r\n\r\n  // Warn about bad behavior with React refs\r\n  Object.keys(defaults).forEach(key => {\r\n    if (key === 'children') {\r\n      warn(`Don't use a default children prop! Refs will be lost.`);\r\n    } else if (\r\n      typeof defaults[key as keyof Defaults] === 'object' &&\r\n      'current' in defaults[key as keyof Defaults]\r\n    ) {\r\n      warn(\r\n        `Found an default property with a 'current' property. If this is a 'React.RefObject' beware that the ref may be lost! ${key}:`,\r\n        defaults[key as keyof Defaults]\r\n      );\r\n    }\r\n  });\r\n\r\n  type Me = { required: Required; defaults: Defaults; injected: Injected };\r\n\r\n  function extend<T extends PropsClass, U extends PropsClass[]>(\r\n    this: Me,\r\n    propsClass: T,\r\n    ...baseClasses: U\r\n  ) {\r\n    // Need to phrase it like this for type inference...\r\n    return declare(propsClass, declare(this, ...baseClasses));\r\n  }\r\n\r\n  const types = {\r\n    // Default arguments\r\n    defaults: defaults as { [K in keyof Defaults]: Defaults[K] },\r\n    // Required arguments\r\n    required: {} as { [K in keyof Required]: Required[K] },\r\n    // Values supplied not at the call site\r\n    injected: {} as { [K in keyof Injected]: Injected[K] },\r\n    // External-facing props interface (type)\r\n    propsIn: {} as { [K in keyof PropsIn]: PropsIn[K] },\r\n    // Internal-facing props interface (type)\r\n    propsOut: {} as { [K in keyof PropsOut]: PropsOut[K] },\r\n    // Class with my own required and defaults, discounting inherited properties\r\n    own: propsClass as { [K in keyof PropsClass]-?: P[K] & {} },\r\n    // List of base classes (filtered to just show their PropsClass fields)\r\n    bases: (baseClasses as unknown) as {\r\n      [K in keyof S]: S[K] extends PropsClass\r\n        ? { [L in keyof PropsClass]-?: S[K][L] }\r\n        : S[K]\r\n    },\r\n    // Shortcut to declare() with this DefaultProps object as the baseClass\r\n    extend,\r\n  };\r\n\r\n  // Type expanded inline for better tooltip\r\n  type Factory = (\r\n    props: { [K in keyof PropsIn]: PropsIn[K] }\r\n  ) => { [K in keyof PropsOut]: PropsOut[K] };\r\n\r\n  const factory: Factory = props => {\r\n    return {\r\n      ...props,\r\n      ...withImm.mergeIntersect(defaults, props),\r\n    } as ReturnType<Factory>;\r\n  };\r\n\r\n  // Runtime check for whether all props specified are optional (defaults or injected)\r\n  const allOptional = ![propsClass, ...baseClasses].some(c => 'required' in c);\r\n\r\n  type Decorated<T> = <U extends any[], V>(\r\n    props: PropsIn,\r\n    placeholder?: V,\r\n    ...rest: U\r\n  ) => T extends (...args: any[]) => infer W ? W : any;\r\n\r\n  type DecoratedOptional<T> = <U extends any[], V>(\r\n    props?: PropsIn,\r\n    placeholder?: V,\r\n    ...rest: U\r\n  ) => T extends (...args: any[]) => infer W ? W : any;\r\n\r\n  type AcceptsPropsOut = (props: PropsOut, ...rest: any[]) => any;\r\n\r\n  class Wrap {\r\n    // Decorator accepting a function whose props are to be transformed\r\n    static default<T extends AcceptsPropsOut>(f: T) {\r\n      const decorated: Decorated<T> = (props, placeholder, ...rest) => {\r\n        return f(\r\n          factory(props as Parameters<Factory>[0]),\r\n          placeholder,\r\n          ...rest\r\n        );\r\n      };\r\n\r\n      return Object.assign(decorated, types, { wrap: Wrap.default });\r\n    }\r\n\r\n    // Decorator accepting a function whose props are to be transformed where the props argument is optional.\r\n    static optional<T extends AcceptsPropsOut>(f: T) {\r\n      const decorated: DecoratedOptional<T> = (props, placeholder, ...rest) => {\r\n        return f(\r\n          factory(props as Parameters<Factory>[0]),\r\n          placeholder,\r\n          ...rest\r\n        );\r\n      };\r\n\r\n      return Object.assign(decorated, types, { wrap: Wrap.optional });\r\n    }\r\n\r\n    // Select which Wrap signature to use depending on allOptional\r\n    static decorator = (allOptional ? Wrap.optional : Wrap.default) as Equals<\r\n      RequiredOnly<Required>,\r\n      {},\r\n      typeof Wrap.optional,\r\n      typeof Wrap.default\r\n    >;\r\n  }\r\n\r\n  return Object.assign(factory, types, { wrap: Wrap['decorator'] });\r\n}\r\n\r\nexport function required<T extends object, S extends object[] = []>(\r\n  ..._others: S\r\n) {\r\n  type Others = ArrayToIntersectionNonNull<S>;\r\n  return declare(\r\n    class {\r\n      static required: T & Others;\r\n    }\r\n  );\r\n}\r\n\r\n// Arguments are deeply merged in reverse order.\r\nexport function defaults<T extends object[]>(...values: T) {\r\n  return declare(\r\n    class {\r\n      static defaults = withImm.merge(...(values.reverse() as T));\r\n    }\r\n  );\r\n}\r\n\r\nexport function injected<T extends object, S extends object[] = []>(\r\n  ..._others: S\r\n) {\r\n  type Others = ArrayToIntersectionNonNull<S>;\r\n  return declare(\r\n    class {\r\n      static injected: T & Others;\r\n    }\r\n  );\r\n}\r\n\r\n// Test usage:\r\n// import React from 'react';\r\n// import { GoodCanvasElement } from 'components/GoodCanvas';\r\n// import { BaseProps } from 'utils/BaseProps';\r\n// import noop from 'utils/noop';\r\n// class Props {\r\n//   static required: {\r\n//     canvasRef: React.RefObject<GoodCanvasElement> | 5;\r\n//     // canvasStyle: number;\r\n//   };\r\n//   static defaults = {\r\n//     // canvasStyle: {},\r\n//     canvasEffects: noop,\r\n//     canvasNeedsUpdate: 0,\r\n//   };\r\n// }\r\n\r\n// class PropsB {\r\n//   static required: {\r\n//     canvasRef: React.RefObject<GoodCanvasElement> | 5;\r\n//     canvasStyle: { hi: number }; // required if not parent\r\n//   };\r\n//   static defaults = {\r\n//     canvasStyle: {}, // only applied on inheritance\r\n//     canvasEffects: noop,\r\n//     canvasNeedsUpdate: 0,\r\n//   };\r\n// }\r\n\r\n// const a = bind(\r\n//   Props,\r\n//   // [1, 2],\r\n//   // withDefault(Props),\r\n//   // { hi: 'world', defaults: { ddd: 4 }, required: { hello: 'world' } },\r\n//   PropsB\r\n// );\r\n// const c = a.required;\r\n// const d = a.defaults;\r\n// const e = a.own.required;\r\n// const f = a.own.defaults;\r\n// const g = a.bases;\r\n// const h = a.propsIn;\r\n// const i = a.propsOut;\r\n// const j = a.decorate;\r\n// const b = a({ canvasRef: 5, canvasNeedsUpdate: 3 });\r\n// type DefaultProps = Pick<typeof b, keyof typeof b>;\r\n","import React from 'react';\r\nimport { declare, required, defaults } from './DefaultProps';\r\n\r\nexport const StyleProp = defaults({\r\n  style: {} as Partial<React.CSSProperties>,\r\n});\r\n\r\n// https://github.com/sw-yx/react-typescript-cheatsheet#useful-react-prop-type-examples\r\nexport const BaseProps = declare(\r\n  required<{\r\n    /* 1/9/19: SIGH. TypeScript can't check `children` because `React.createElement` returns back a super general `Element` type. */\r\n    children?: React.ReactNode;\r\n    onChange?: (e: React.FormEvent<HTMLInputElement>) => void;\r\n  }>(),\r\n  StyleProp\r\n);\r\n","import React, { useMemo, SVGAttributes } from 'react';\r\nimport * as d3 from 'd3';\r\nimport { Pair } from 'utils/Pair';\r\nimport { evaluate } from 'utils/evaluate';\r\nimport { required, defaults, declare } from 'utils/DefaultProps';\r\nimport { animated, AnimatedValue } from 'react-spring';\r\nimport { BaseProps } from 'utils/BaseProps';\r\n\r\nexport const Args = declare(\r\n  required<{ data: AnimatedValue<Pair[]> }>(),\r\n  defaults({\r\n    // alpha = 0.5 gives centripetal CatmullRom\r\n    line: 'd3.line().curve(d3.curveCatmullRom.alpha(0.5))' as\r\n      | d3.Line<Pair>\r\n      | string,\r\n    fill: 'transparent',\r\n  }),\r\n  required<SVGAttributes<SVGPathElement>>(),\r\n  BaseProps\r\n);\r\n\r\nexport const Line = Args.wrap(({ data, line, ...rest }) => {\r\n  const theLine = useMemo(\r\n    () =>\r\n      (typeof line === 'string' ? evaluate(line, { d3 }) : line) as d3.Line<\r\n        Pair\r\n      >,\r\n    [line]\r\n  );\r\n\r\n  return (\r\n    <animated.path d={data.interpolate(x => theLine(x) || '')} {...rest} />\r\n  );\r\n});\r\n","export const evaluate = (expr: string, context: any = {}) =>\r\n  Function(...Object.keys(context), `'use strict';return ${expr}`)(\r\n    ...Object.keys(context).map(k => context[k])\r\n  );\r\n","import { useState, useCallback } from 'react';\r\n\r\nexport function useCounter(initial: number = 0): [number, () => void] {\r\n  const [value, setValue] = useState(initial);\r\n  const increment = useCallback(() => setValue(i => i + 1), []);\r\n  return [value, increment];\r\n}\r\n","const noop = () => {};\r\nexport default noop;\r\n","import React, { useEffect } from 'react';\r\nimport noop from 'utils/noop';\r\nimport { declare, required, defaults } from 'utils/DefaultProps';\r\n\r\nconst Args = declare(\r\n  required<{ event: string }>(),\r\n  defaults({\r\n    timeout: 250,\r\n    first: noop,\r\n    last: noop,\r\n  })\r\n);\r\n\r\nexport const useThrottled = Args.wrap(\r\n  ({ event, first, last, timeout }, inputs?: React.InputIdentityList) => {\r\n    useEffect(() => {\r\n      if (!event) return;\r\n\r\n      let ongoing = false;\r\n      let id: number;\r\n\r\n      const handler = () => {\r\n        // first resize event\r\n        if (!ongoing) {\r\n          if (first) first();\r\n          ongoing = true;\r\n        }\r\n\r\n        // dismiss pending events\r\n        if (id) clearTimeout(id);\r\n\r\n        // fulfill last response after timeout\r\n        id = window.setTimeout(() => {\r\n          ongoing = false;\r\n          if (last) last();\r\n        }, timeout);\r\n      };\r\n\r\n      window.addEventListener(event, handler);\r\n      return () => window.removeEventListener(event, handler);\r\n    }, inputs);\r\n  }\r\n);\r\n","import { useMemo, useCallback } from 'react';\r\nimport { withImm } from 'utils/Imm';\r\nimport Denque from 'denque';\r\n\r\nconst defaults = {\r\n  maxSize: Infinity,\r\n};\r\n\r\ninterface Args<T> extends Partial<typeof defaults> {\r\n  initialValue?: T[];\r\n}\r\n\r\nexport function useDataBufferSilent<T = number, U extends Array<T> = T[]>(\r\n  args: Args<T>\r\n): [Denque<T>, (newData: U) => void] {\r\n  const { initialValue, maxSize } = withImm.merge(defaults, args);\r\n  const buffer = useMemo(\r\n    () => (initialValue ? new Denque<T>(initialValue) : new Denque<T>()),\r\n    []\r\n  );\r\n  const updateBuffer = useCallback((newData: U) => {\r\n    buffer.splice(buffer.length, 0, ...newData);\r\n    if (buffer.length > maxSize!) {\r\n      buffer.splice(0, buffer.length - maxSize!);\r\n    }\r\n  }, []);\r\n  return [buffer, updateBuffer];\r\n}\r\n","import { useRef } from 'react';\r\nimport warn from 'utils/warn';\r\nimport { defaults, required } from 'utils/DefaultProps';\r\n\r\nconst Args = defaults({\r\n  initialValue: 0,\r\n  minDelta: 10, // ms\r\n  maxDelta: Infinity, // ms\r\n  halfLife: 250, // ms\r\n});\r\n\r\nconst UpdateArgs = required<{\r\n  datum: number;\r\n  delta: number; // ms\r\n}>();\r\n\r\nexport const useDecay = Args.wrap(\r\n  ({ initialValue, minDelta, maxDelta, halfLife }) => {\r\n    const signal = useRef(initialValue);\r\n\r\n    const update = UpdateArgs.wrap(({ datum, delta }) => {\r\n      const decay = Math.pow(0.5, delta / halfLife);\r\n      if (delta < minDelta) {\r\n      } else if (delta > maxDelta) signal.current = 1000 / delta;\r\n      else signal.current = decay * signal.current + (1 - decay) * datum;\r\n      if (isNaN(signal.current)) {\r\n        warn('Signal was NaN...');\r\n        signal.current = 0;\r\n      }\r\n      return signal.current;\r\n    });\r\n\r\n    return update;\r\n  }\r\n);\r\n","import { useEffect } from 'react';\r\nimport { Pair } from 'utils/Pair';\r\nimport { useDataBufferSilent } from 'utils/CustomHooks';\r\nimport { declare, required, defaults } from 'utils/DefaultProps';\r\nimport Pusher from 'pusher-js';\r\n\r\nconst CURRENT = [3.1, 3.2, 2.1, 2.0, 2.9, 1.8, 4.5, 4.2];\r\nconst [lo, hi] = [Math.min(...CURRENT), Math.max(...CURRENT)];\r\n// const start = Date.now();\r\nconst generate = (): Pair => [\r\n  // (((Date.now() - start) / 1000 / 10) * 1400) % 1400,\r\n  Date.now(),\r\n  Math.random() * 150,\r\n  // Math.random() * (hi - lo) + lo,\r\n];\r\nconst _initialValue = [...Array(100)].map((_x, i) => [\r\n  Date.now() + ((100 - 1 - i) / 100) * -10000,\r\n  Math.random() * (hi - lo) + lo,\r\n]);\r\n\r\nconst Args = declare(\r\n  required<{\r\n    samplePeriod: number; // ms\r\n    pusher: {\r\n      channelName: string;\r\n    };\r\n  }>(),\r\n  defaults({\r\n    pusher: {\r\n      key: '9dfb7224d7fd60cc9c5f',\r\n      options: { cluster: 'us2', forceTLS: true },\r\n      event: 'new-data',\r\n    },\r\n    maxSize: 100,\r\n    initialValue: [] as Pair[],\r\n  })\r\n);\r\n\r\nexport const useDataFeed = Args.wrap(\r\n  ({\r\n    samplePeriod,\r\n    maxSize,\r\n    initialValue,\r\n    pusher: { key, options, channelName, event },\r\n  }) => {\r\n    const [buffer, concat] = useDataBufferSilent<Pair>({\r\n      maxSize,\r\n      initialValue,\r\n    });\r\n\r\n    useEffect(() => {\r\n      if (channelName === 'debug') {\r\n        let id: number;\r\n\r\n        const receiveData = () => {\r\n          concat([generate()]);\r\n          id = window.setTimeout(\r\n            receiveData,\r\n            samplePeriod + 250 * (Math.random() - 0.5)\r\n          );\r\n        };\r\n        receiveData();\r\n\r\n        return () => clearTimeout(id);\r\n      } else {\r\n        const pusher = new Pusher(key, options);\r\n        const channel = pusher.subscribe(channelName);\r\n        const handler = ({ payload }: { payload: Pair[] }) => {\r\n          concat(payload);\r\n          Object.assign(window, { buffer, payload });\r\n        };\r\n        channel.bind(event, handler);\r\n\r\n        return () => pusher.unsubscribe(channelName);\r\n      }\r\n    }, []);\r\n\r\n    return buffer;\r\n  }\r\n);\r\n","export function deriveCoordinate(\r\n  this: { width: number; height: number },\r\n  coord: Partial<{ width: number; height: number }>\r\n) {\r\n  const { width: w = 0, height: h = 0 } = coord;\r\n  const { width, height } = this;\r\n  const result = w * width + h * height;\r\n  return result;\r\n}\r\n\r\nexport function deriveCoordinates(\r\n  this: { width: number; height: number },\r\n  {\r\n    x = {},\r\n    y = {},\r\n  }: Partial<{\r\n    x: Partial<{ width: number; height: number }>;\r\n    y: Partial<{ width: number; height: number }>;\r\n  }>\r\n) {\r\n  return {\r\n    x: deriveCoordinate.call(this, x),\r\n    y: deriveCoordinate.call(this, y),\r\n  };\r\n}\r\n","import { withImm } from './Imm';\r\n\r\nconst clamp = (x: number, range: [number?, number?]) => {\r\n  const [lo, hi] = withImm.mergeIntersect([-Infinity, Infinity], range);\r\n  return Math.min(hi, Math.max(lo, x));\r\n};\r\n\r\nexport default clamp;\r\n","import { Pair } from 'utils/Pair';\r\nimport { useSpring } from 'react-spring';\r\nimport Denque from 'denque';\r\nimport * as d3 from 'd3';\r\nimport clamp from 'utils/clamp';\r\nimport { useMemo, useRef, useEffect } from 'react';\r\nimport { newEffect } from 'utils/canvas';\r\nimport { required, defaults, declare } from 'utils/DefaultProps';\r\n\r\nconst Args = declare(\r\n  required<{\r\n    scaleX: d3.ScaleLinear<number, number>;\r\n    scaleY: d3.ScaleLinear<number, number>;\r\n    buffer: Denque<Pair>;\r\n  }>(),\r\n  defaults({\r\n    // fraction of timespan to extend memory by for vertical autoscaling\r\n    extraHistory: 0,\r\n  })\r\n);\r\n\r\nexport const useView = Args.wrap(({ scaleX, scaleY, buffer, extraHistory }) => {\r\n  const [{ extent }, set] = useSpring(() => ({\r\n    extent: [0, 0],\r\n    config: { tension: 60, friction: 10 },\r\n  }));\r\n  const currentScaleX = scaleX.copy();\r\n  const bisector = useMemo(() => d3.bisector((d: Pair) => d[0]), []);\r\n  const transformed = useRef([] as Pair[]);\r\n\r\n  useEffect(() => {\r\n    currentScaleX.domain(scaleX.domain()).range(scaleX.range());\r\n  });\r\n\r\n  const update = () => {\r\n    // Adjust the input scale domain for current time.\r\n    const now = Date.now();\r\n    const [start, end] = currentScaleX\r\n      .domain(scaleX.domain().map(x => x + now))\r\n      .domain();\r\n    const timespan = end - start;\r\n\r\n    // Find indices in buffer corresponding to [start, end] times.\r\n    const history = extraHistory * timespan;\r\n    const left = bisector.left(buffer, start - history);\r\n    const right = bisector.right(buffer, end, left);\r\n\r\n    // Pad indices a little so the edge-jitter of the spline is not visible.\r\n    const pad = 2;\r\n    const padRight = clamp(right + pad, [, buffer.length]);\r\n    const padLeft = clamp(left - pad, [0]);\r\n\r\n    // Slice the view of the buffer.\r\n    const view = buffer.slice(padLeft, padRight);\r\n\r\n    // TODO: If I have a lot of free time, add striding to the view, with consistent phase.\r\n\r\n    // Set y-axis scaling for view\r\n    if (view.length) {\r\n      set({ extent: d3.extent(view, d => d[1]) as Pair });\r\n    }\r\n\r\n    Object.assign(window, {\r\n      extent: extent.value,\r\n      timespan,\r\n      left,\r\n      right,\r\n      buffer,\r\n      hist: history,\r\n      start,\r\n      end,\r\n      now,\r\n      length: transformed.current.length,\r\n      transformed,\r\n    });\r\n\r\n    scaleY.domain(extent.value);\r\n    transformed.current = view.map(\r\n      ([x, y]): Pair => [currentScaleX(x), scaleY(y)]\r\n    );\r\n  };\r\n\r\n  return [transformed, update, currentScaleX] as [\r\n    typeof transformed,\r\n    typeof update,\r\n    typeof currentScaleX\r\n  ];\r\n});\r\n","import { required } from 'utils/DefaultProps';\r\nimport Denque from 'denque';\r\nimport { Pair } from 'utils/Pair';\r\nimport { RelativeCoordinates } from 'utils/canvas/EnhancedContext';\r\nimport { useEffect } from 'react';\r\nimport { deriveCoordinates } from 'utils/coordinates';\r\nimport { useView } from './useView';\r\nimport { REF } from 'utils/easier';\r\n\r\nconst Args = required<{\r\n  buffer: Denque<Pair>;\r\n  scaleX: d3.ScaleLinear<number, number>;\r\n  scaleY: d3.ScaleLinear<number, number>;\r\n  timespan: REF<number>;\r\n  dims: REF<DOMRect>;\r\n  padDomain: number;\r\n  padRange: RelativeCoordinates;\r\n}>();\r\n\r\nexport const useLine = Args.wrap(\r\n  ({ timespan, dims, padDomain, padRange, ...init }) => {\r\n    useEffect(() => {\r\n      const { x: padX, y: padY } = deriveCoordinates.call(\r\n        dims.current,\r\n        padRange\r\n      );\r\n      init.scaleX.domain([-timespan.current - padDomain, -padDomain]);\r\n      init.scaleX.range([padX, dims.current.width - padX]);\r\n      init.scaleY.range([padY, dims.current.height - padY]);\r\n    });\r\n\r\n    const [view, update, currentScaleX] = useView(init);\r\n    return Object.assign({ view, update, currentScaleX }, init);\r\n  }\r\n);\r\n","const identity = <T = any>(arg: T) => arg;\r\nexport default identity;\r\n","import { Pair } from 'utils/Pair';\r\nimport identity from './identity';\r\n\r\nexport const diff = <T>(d: Pair<T>, convert: (x: T) => any = identity) =>\r\n  +convert(d[1]) - +convert(d[0]);\r\n","import React, { SVGAttributes } from 'react';\r\nimport { declare, required, defaults } from 'utils/DefaultProps';\r\nimport * as d3 from 'd3';\r\nimport { diff } from 'utils/diff';\r\nimport { Pair } from 'utils/Pair';\r\nimport clamp from 'utils/clamp';\r\nimport { REF } from 'utils/easier';\r\nimport { OpaqueInterpolation, animated, interpolate } from 'react-spring';\r\n\r\nconst Args = declare(\r\n  required<{\r\n    clock: OpaqueInterpolation<number>;\r\n    scale: d3.ScaleLinear<number, number>;\r\n    timespan: REF<number>;\r\n    dims: REF<DOMRect>;\r\n    count: number;\r\n  }>(),\r\n  defaults({\r\n    textStyle: {\r\n      fill: '#888',\r\n      style: {\r\n        font: '14px ubuntu mono, monospace',\r\n      },\r\n    } as SVGAttributes<SVGTextElement>,\r\n    lineStyle: {\r\n      stroke: '#444',\r\n    } as SVGAttributes<SVGLineElement>,\r\n  })\r\n);\r\n\r\nconst blank = new Date(0);\r\n\r\nexport const useTicks = Args.wrap(\r\n  ({ clock, scale, timespan, dims, count, textStyle, lineStyle }) => {\r\n    const currentScale = d3.scaleTime();\r\n    const format = currentScale.tickFormat();\r\n\r\n    const data = clock.interpolate(() => {\r\n      currentScale.domain(scale.domain()).range(scale.range());\r\n      const span = diff(currentScale.domain() as Pair<Date>, x => x.getTime());\r\n      const every = clamp(span / timespan.current, [1]);\r\n      const ticks = currentScale.ticks(d3.timeSecond.every(every)!);\r\n      const gap = diff(ticks.slice(0, 2) as Pair<Date>, currentScale) || 0;\r\n      const pad = clamp(0.05 * gap, [1]);\r\n      const height = dims.current.height;\r\n\r\n      return { ticks, pad, height };\r\n    });\r\n\r\n    const Ticks = () => (\r\n      <g>\r\n        {[...Array(count)].map((_, i) => {\r\n          const tick = data.interpolate(data => data.ticks[i] || blank);\r\n          const t = tick.interpolate(tick => currentScale(tick));\r\n          const height = data.interpolate(data => data.height);\r\n          const pad = data.interpolate(data => data.pad);\r\n          return (\r\n            <animated.g\r\n              key={i}\r\n              transform={t.interpolate(t => `translate(${t},0)`)}\r\n              visibility={tick.interpolate(tick => +(tick !== blank))}\r\n            >\r\n              <animated.line y2={height} {...lineStyle} />\r\n              <animated.text\r\n                x={pad}\r\n                y={interpolate([height, pad], (height, pad) => height - pad)}\r\n                {...textStyle}\r\n              >\r\n                {tick.interpolate(tick => format(tick))}\r\n              </animated.text>\r\n            </animated.g>\r\n          );\r\n        })}\r\n      </g>\r\n    );\r\n\r\n    const ticks = data.interpolate(data => data.ticks);\r\n\r\n    return [Ticks, ticks, currentScale] as [\r\n      typeof Ticks,\r\n      typeof ticks,\r\n      typeof currentScale\r\n    ];\r\n  }\r\n);\r\n","import { useMemo, useEffect, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\nimport { required, declare, defaults } from 'utils/DefaultProps';\r\nimport { Pair } from 'utils/Pair';\r\nimport noop from 'utils/noop';\r\nimport { REF, CREF } from 'utils/easier';\r\nimport { diff } from '../../utils/diff';\r\nimport { literally } from 'utils/meta';\r\n\r\nconst Args = declare(\r\n  required<{\r\n    scale: d3.ScaleLinear<number, number>;\r\n    svgRef: CREF<SVGSVGElement>;\r\n    dims: REF<{ width: number; height: number }>;\r\n  }>(),\r\n  defaults({\r\n    dblclick: 150, // ms\r\n  })\r\n);\r\n\r\nconst slope = (s: d3.ScaleLinear<number, number>) =>\r\n  diff(s.range() as Pair) / diff(s.domain() as Pair);\r\nconst avg = (values: number[]) =>\r\n  values.length ? values.reduce((a, x) => a + x, 0) / values.length : 0;\r\ntype Zoom = d3.ZoomBehavior<SVGSVGElement, any>;\r\n\r\nexport const useControls = Args.wrap(({ scale, svgRef, dims, dblclick }) => {\r\n  const baseScale = scale.copy();\r\n  const effect = useRef(noop);\r\n\r\n  const zoom: Zoom = useMemo(\r\n    () => d3.zoom<SVGSVGElement, any>().scaleExtent([1 / 5, 1]),\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    const width = dims.current.width;\r\n    zoom.extent([[0, 0], [width, 0]]);\r\n    zoom.translateExtent([[-Infinity, 0], [width, 0]]);\r\n    baseScale.domain(scale.domain()).range(scale.range());\r\n  });\r\n\r\n  useEffect(() => {\r\n    const selection = d3.select(svgRef.current!);\r\n\r\n    let start: number;\r\n    zoom\r\n      .on('zoom', () => {\r\n        const t = d3.event.transform as d3.ZoomTransform;\r\n        scale.domain(t.rescaleX(baseScale).domain());\r\n      })\r\n      .duration(dblclick);\r\n\r\n    const paused = (at: number) => () => {\r\n      const delta = Date.now() - at;\r\n      at += delta;\r\n      const dx = delta * slope(baseScale);\r\n      zoom.translateBy(selection, dx, 0);\r\n    };\r\n    let clickID = NaN;\r\n    type States = 'unpaused' | 'waiting' | 'paused' | 'cancelling';\r\n    let state: States = 'unpaused';\r\n    const nextState = (s: States) => {\r\n      const prevState = state;\r\n      switch ((state = s)) {\r\n        case 'unpaused': {\r\n          effect.current = noop;\r\n          break;\r\n        }\r\n        case 'waiting': {\r\n          if (prevState === 'waiting') break;\r\n          const from = { unpaused: 'paused', paused: 'unpaused' } as {\r\n            [k: string]: States;\r\n          };\r\n          clickID = window.setTimeout(() => {\r\n            nextState(from[prevState]);\r\n          }, dblclick);\r\n          break;\r\n        }\r\n        case 'paused': {\r\n          effect.current = paused(Date.now());\r\n          break;\r\n        }\r\n        case 'cancelling': {\r\n          window.clearTimeout(clickID);\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    const factor = 0.33; // adjust duration calculated by d3.interpolateZoom\r\n    const reset = () => {\r\n      const t = d3.zoomTransform(svgRef.current!);\r\n      const width = diff(scale.range() as Pair);\r\n      const cx = t.x + width / 2;\r\n      const duration =\r\n        factor *\r\n        d3.interpolateZoom(\r\n          [cx, 0, width],\r\n          [avg(baseScale.range()), 0, diff(baseScale.range() as Pair)]\r\n        ).duration;\r\n      selection\r\n        .transition()\r\n        .duration(duration)\r\n        .call(zoom.transform, d3.zoomIdentity);\r\n    };\r\n\r\n    selection\r\n      .call(zoom)\r\n      .on('dblclick.zoom', () => {\r\n        reset();\r\n        nextState('cancelling');\r\n        nextState('unpaused');\r\n      })\r\n      .on('click', () => nextState('waiting'));\r\n\r\n    return () => selection.on('.zoom', null);\r\n  });\r\n\r\n  const update = () => effect.current();\r\n  return update;\r\n});\r\n","import { useCounter, useSilentCounter } from 'utils/CustomHooks';\r\nimport { useEffect, useRef } from 'react';\r\nimport noop from 'utils/noop';\r\nimport { defaults } from 'utils/DefaultProps';\r\n\r\nconst batchMap = new Map<number, FrameRequestCallback[]>();\r\n\r\nexport const Args = defaults({ silent: true, interval: 16, batch: NaN });\r\n\r\nexport function useAnimationFrame(\r\n  f: FrameRequestCallback = noop,\r\n  options = {},\r\n  inputs?: React.InputIdentityList\r\n) {\r\n  const { silent, interval, batch } = Args(options);\r\n\r\n  const firstTime = useRef(true);\r\n  useEffect(() => {\r\n    if (firstTime.current) {\r\n      firstTime.current = false;\r\n    } else {\r\n      console.error(\r\n        \"Options passed to useAnimationFrame were toggled in the same lifecycle of the component. Don't do this! Options must be kept constant or React hooks won't work.\"\r\n      );\r\n    }\r\n  }, [silent, interval, batch]);\r\n\r\n  const [, nextFrame] = silent ? useSilentCounter() : useCounter();\r\n\r\n  useEffect(() => {\r\n    let id: number;\r\n    const tail =\r\n      interval == 16\r\n        ? (callback: FrameRequestCallback) =>\r\n            (id = window.requestAnimationFrame(callback))\r\n        : (callback: FrameRequestCallback) =>\r\n            (id = window.setTimeout(callback, interval));\r\n\r\n    const tracks = isFinite(batch)\r\n      ? batchMap.has(batch)\r\n        ? (batchMap.get(batch)!.push(f), batchMap.get(batch)!)\r\n        : batchMap.set(batch, [f]).get(batch)!\r\n      : batchMap.set(batchMap.size, [f]).get(batchMap.size - 1)!;\r\n\r\n    const loop = (ts: number) => {\r\n      const now = ts || performance.now();\r\n      tracks.forEach(g => g(now));\r\n      nextFrame();\r\n      tail(loop);\r\n    };\r\n\r\n    if (interval == 16) {\r\n      id = window.requestAnimationFrame(loop);\r\n      return () => window.cancelAnimationFrame(id);\r\n    } else {\r\n      id = window.setTimeout(loop, interval);\r\n      return () => window.clearTimeout(id);\r\n    }\r\n  }, inputs);\r\n}\r\n","import { useRef, useCallback } from 'react';\r\n\r\nexport function useSilentCounter(initial: number = 0): [number, () => void] {\r\n  const value = useRef(initial);\r\n  const increment = useCallback(() => value.current++, []);\r\n  return [value.current, increment];\r\n}\r\n","import { useAnimationFrame, Args as FrameArgs } from './useAnimationFrame';\r\nimport { useSpring } from 'react-spring';\r\nimport { defaults } from 'utils/DefaultProps';\r\n\r\nconst Args = FrameArgs.extend(\r\n  defaults({\r\n    // interval: 750,\r\n  })\r\n);\r\n\r\nexport const useAnimationClock = Args.wrap(args => {\r\n  const [{ clock }, update] = useSpring(() => ({\r\n    clock: 0,\r\n    immediate: true,\r\n  }));\r\n  useAnimationFrame(() => {\r\n    update({ clock: clock.value + args.interval });\r\n  }, args);\r\n  return clock;\r\n});\r\n","import React, { useRef, useEffect } from 'react';\r\nimport { GoodCanvasChild } from 'components/GoodCanvas';\r\nimport { usePoints } from 'components/usePoints';\r\nimport { Line } from 'components/Line';\r\nimport { useDataFeed } from './useDataFeed';\r\nimport { useView } from './useView';\r\nimport { useLine } from './useLine';\r\nimport {\r\n  clear,\r\n  getContext,\r\n  CanvasEffect,\r\n  newEffect,\r\n  EffectOptions,\r\n  RelativeCoordinates,\r\n} from 'utils/canvas';\r\nimport { useDash } from './useDash';\r\nimport { useFPS } from './useFPS';\r\nimport { useTimespan } from './useTimespan';\r\nimport { useClip } from './useClip';\r\nimport { useTicks } from './useTicks';\r\nimport { useControls } from './useControls';\r\nimport { usePaddingSpring } from './usePaddingSpring';\r\nimport * as d3 from 'd3';\r\nimport { diff } from 'utils/diff';\r\nimport { Pair } from 'utils/Pair';\r\nimport clamp from 'utils/clamp';\r\nimport { useGlow } from 'components/Glow';\r\nimport { defaults, declare, required } from 'utils/DefaultProps';\r\nimport { REF, CREF } from 'utils/easier';\r\nimport { animated, AnimatedValue, OpaqueInterpolation } from 'react-spring';\r\nimport { deriveCoordinates } from 'utils/coordinates';\r\nimport Denque from 'denque';\r\nimport { number } from 'prop-types';\r\nimport noop from 'utils/noop';\r\nimport { useAnimationClock } from './useAnimationClock';\r\n\r\nconst Args = declare(\r\n  required<{\r\n    svgRef: CREF<SVGSVGElement>;\r\n    channelNames: string[];\r\n  }>()\r\n);\r\n\r\nexport const _IVPlot = Args.wrap(({ svgRef, channelNames }) => {\r\n  const clock = useAnimationClock();\r\n  const samplePeriod = 400;\r\n\r\n  const dims = useRef<DOMRect>({ width: 0, height: 0 } as DOMRect);\r\n  const timespan = useRef(0);\r\n  const speed = 100;\r\n  useEffect(() => {\r\n    dims.current = svgRef.current!.getBoundingClientRect() as DOMRect;\r\n    timespan.current = dims.current.width / (speed / 1000);\r\n  });\r\n\r\n  const padDomain = 4 * samplePeriod;\r\n  const padRange = { y: { height: 0.1 } };\r\n\r\n  const amps = useLine({\r\n    buffer: useDataFeed({\r\n      samplePeriod: samplePeriod,\r\n      maxSize: 500,\r\n      pusher: {\r\n        channelName: channelNames[0],\r\n      },\r\n    }),\r\n    scaleX: d3.scaleLinear(),\r\n    scaleY: d3.scaleLinear(),\r\n    timespan,\r\n    dims,\r\n    padDomain,\r\n    padRange,\r\n  });\r\n\r\n  const volts = useLine({\r\n    buffer: useDataFeed({\r\n      samplePeriod: samplePeriod,\r\n      maxSize: 500,\r\n      pusher: {\r\n        channelName: channelNames[1],\r\n      },\r\n    }),\r\n    scaleX: amps.scaleX,\r\n    scaleY: d3.scaleLinear(),\r\n    timespan,\r\n    dims,\r\n    padDomain,\r\n    padRange,\r\n  });\r\n\r\n  const updateControls = useControls({ scale: amps.scaleX, svgRef, dims });\r\n\r\n  const numTicks = 25;\r\n  const [Ticks, ticks, ticksScale] = useTicks({\r\n    ...{ clock, scale: amps.currentScaleX, timespan, dims, count: numTicks },\r\n  });\r\n\r\n  const start = performance.now();\r\n  let count = 0;\r\n  return (\r\n    <>\r\n      <animated.g visibility='hidden'>\r\n        {clock.interpolate(() => {\r\n          // (count % 180 == 0 ? console.clear() : 0) ||\r\n          //   console.log((++count / (performance.now() - start)) * 1000);\r\n          Object.assign(window, {\r\n            svgRef,\r\n            view: amps.view,\r\n            currentScaleX: amps.currentScaleX,\r\n            timespan: timespan.current,\r\n            amps,\r\n            dims,\r\n          });\r\n\r\n          updateControls();\r\n          amps.update();\r\n          volts.update();\r\n        })}\r\n      </animated.g>\r\n      <Ticks />\r\n      <Line stroke='pink' data={clock.interpolate(() => amps.view.current)} />\r\n      <Line stroke='cyan' data={clock.interpolate(() => volts.view.current)} />\r\n      {/* <animated.g>\r\n        {[...Array(numTicks)].map((_, i) => {\r\n          console.log('hiiii', i);\r\n          const tick = ticks.interpolate(ticks => ticks[i]);\r\n          const t = tick.interpolate(tick => ticksScale(tick));\r\n          const available = clock.interpolate(\r\n            () => amps.view.current.length > i\r\n          );\r\n          const y = available.interpolate(available =>\r\n            available ? amps.view.current[i][1] : 0\r\n          );\r\n          const visibility = available.interpolate(a => +a);\r\n\r\n          return (\r\n            <animated.circle\r\n              cx={t}\r\n              cy={y}\r\n              r={5}\r\n              fill='pink'\r\n              visibility={visibility}\r\n            />\r\n          );\r\n        })}\r\n      </animated.g> */}\r\n    </>\r\n  );\r\n\r\n  // const volts = {\r\n  //   buffer: useDataFeed({\r\n  //     samplePeriod: samplePeriod,\r\n  //     maxSize: 40,\r\n  //   }),\r\n  //   scaleX: amps.scaleX,\r\n  //   scaleY: d3.scaleLinear(),\r\n  // };\r\n\r\n  // const {\r\n  //   view: voltsView,\r\n  //   update: updateVoltsView,\r\n  //   currentScaleX\r\n  // } = useView(volts);\r\n\r\n  // const LabelsArgs = declare(\r\n  //   required<{ data: REF<Pair[]>; scaleY: d3.ScaleLinear<number, number> }>(),\r\n  //   defaults({ style: { font: '14px ubuntu mono, monospace' } })\r\n  // );\r\n\r\n  // const useLabels = LabelsArgs.wrap(({ data, scaleY, ...effectOptions }) => {\r\n  //   const format = (x: number) => x.toFixed(1); //d3.format('.1f');\r\n  //   return newEffect(\r\n  //     ctx => {\r\n  //       const pad = clamp(0.01 * ctx.height, [1]);\r\n  //       for (const [x, y] of data.current) {\r\n  //         ctx.fillText(format(scaleY.invert(y)), x + pad, y - pad);\r\n  //       }\r\n  //     },\r\n  //     { ...effectOptions }\r\n  //   );\r\n  // });\r\n\r\n  // const dashed = useDash({ segments: [4, 6], period: 1000 });\r\n  // const inside = useClip({ by: { height: 0.1 } });\r\n  // const outside = useClip({ by: { height: 0.1 }, invert: true });\r\n  // const glow1 = useGlow({\r\n  //   spread: 0.5,\r\n  //   blur: 10,\r\n  //   color: 'hsl(330, 100%, 50%)',\r\n  // });\r\n  // const glow2 = useGlow({\r\n  //   spread: 0.5,\r\n  //   blur: 10,\r\n  //   color: 'hsl(210, 100%, 50%)',\r\n  // });\r\n  // // const line = useLine({\r\n  // //   data: ampsView,\r\n  // //   style: { strokeStyle: 'hsl(330, 100%, 67%)' },\r\n  // // });\r\n  // const points = usePoints({ data: ampsView });\r\n  // // const line2 = useLine({\r\n  // //   data: voltsView,\r\n  // //   style: { strokeStyle: 'hsl(210, 100%, 67%)' },\r\n  // // });\r\n  // const points2 = usePoints({\r\n  //   data: voltsView,\r\n  //   style: {\r\n  //     fillStyle: 'hsl(210, 100%, 75%)',\r\n  //     strokeStyle: 'hsl(210, 100%, 50%)',\r\n  //   },\r\n  // });\r\n\r\n  // const animations: CanvasEffect[] = [\r\n  //   updateZoomedScale,\r\n  //   updateAmpsView,\r\n  //   updateVoltsView,\r\n  //   clear,\r\n  //   useTicks({ viewScale }),\r\n  //   // outside(dashed(line), dashed(line2)),\r\n  //   inside(\r\n  //     // line,\r\n  //     points(useLabels({ data: ampsView, scaleY })),\r\n  //     // line2,\r\n  //     points2(useLabels({ data: voltsView, scaleY: scaleY2 }))\r\n  //   ),\r\n  //   useFPS({\r\n  //     offset: { x: { height: -0.1 }, y: { height: -0.9 } },\r\n  //     style: { fillStyle: 'hsl(90, 75%, 50%)' },\r\n  //   }),\r\n  // ];\r\n\r\n  // // let n = 0;\r\n  // useAnimationFrame(\r\n  //   ts => {\r\n  //     const { ctx } = getContext(props.canvasRef);\r\n  //     animations.forEach(e => e(ctx));\r\n  //     // console.log('frame:', ++n, 'ts:', ts);\r\n  //   }\r\n  //   // ,{ batch: 0, interval: 500 }\r\n  // );\r\n\r\n  // return null;\r\n});\r\n","import { withImm } from 'utils/Imm';\r\n\r\nexport interface Args {\r\n  event: string;\r\n  customEvent: string;\r\n  _window?: typeof window;\r\n}\r\n\r\nexport const defaultArgs = {\r\n  _window: window,\r\n};\r\n\r\nconst throttle = (args: Args) => {\r\n  // unpack args\r\n  const { _window } = withImm.mergeIntersect(defaultArgs, args);\r\n  const { event, customEvent } = args;\r\n\r\n  if (!event) throw Error('`event` should not be blank');\r\n  if (!customEvent) throw Error('`customEvent` should not be blank');\r\n\r\n  let ready = true;\r\n\r\n  const dispatcher = () => {\r\n    // dispatchEvent is synchronous (waits for event listener to finish running)\r\n    _window!.dispatchEvent(new CustomEvent(customEvent));\r\n    ready = true;\r\n  };\r\n\r\n  const throttler = () => {\r\n    if (ready) {\r\n      ready = false;\r\n      requestAnimationFrame(dispatcher);\r\n    }\r\n  };\r\n\r\n  _window!.addEventListener(event, throttler, { passive: true });\r\n\r\n  const cleanup = () => {\r\n    _window!.removeEventListener(event, throttler);\r\n  };\r\n\r\n  return cleanup;\r\n};\r\n\r\nexport const optimizedResize = 'optimized-resize';\r\nthrottle({ event: 'resize', customEvent: optimizedResize });\r\n\r\nexport default throttle;\r\n","import React, { useEffect } from 'react';\r\nimport { optimizedResize } from 'utils/throttleEvent';\r\nimport { useThrottled } from 'utils/CustomHooks';\r\nimport { BaseProps } from 'utils/BaseProps';\r\nimport { declare, defaults } from 'utils/DefaultProps';\r\nimport { REF } from 'utils/easier';\r\nimport { animated, useSpring } from 'react-spring';\r\n\r\nexport const Props = declare(\r\n  defaults({\r\n    radius: 5,\r\n    timeout: 250,\r\n    enabled: true,\r\n    style: { filter: '' } as typeof BaseProps.propsOut.style,\r\n  }),\r\n  BaseProps\r\n);\r\n\r\nexport const OwnProps = declare(Props.own);\r\n\r\nconst Blur = Props.wrap(\r\n  ({ children, style, radius, timeout, enabled }, ref: REF<HTMLDivElement>) => {\r\n    const [{ filter }, update] = useSpring(() => ({\r\n      filter: `${style.filter} blur(0px)`,\r\n      from: {\r\n        filter: `${style.filter} blur(${radius}px)`,\r\n      },\r\n      config: { duration: 250 },\r\n    }));\r\n\r\n    // attach handler to blur on window resize\r\n    useThrottled(\r\n      {\r\n        event: optimizedResize,\r\n        first: () =>\r\n          update({\r\n            filter: `${style.filter} blur(${enabled ? radius : 0}px)`,\r\n          }),\r\n        last: () =>\r\n          update({\r\n            filter: `${style.filter} blur(0px)`,\r\n          }),\r\n        timeout,\r\n      },\r\n      [timeout]\r\n    );\r\n\r\n    // attach handler to blur on visibility change\r\n    useEffect(() => {\r\n      const handler = () => {\r\n        update({\r\n          filter: `${style.filter} blur(${\r\n            enabled && document.hidden ? radius : 0\r\n          }px)`,\r\n        });\r\n      };\r\n      document.addEventListener('visibilitychange', handler);\r\n      return () => document.removeEventListener('visibilitychange', handler);\r\n    }, [style.filter, enabled, radius]);\r\n\r\n    return (\r\n      <animated.div\r\n        ref={ref}\r\n        style={{\r\n          ...style,\r\n          filter,\r\n        }}\r\n      >\r\n        {children}\r\n      </animated.div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default React.forwardRef(Blur);\r\n","import React, { useRef, useEffect, useState } from 'react';\r\nimport { _IVPlot } from './_IVPlot';\r\nimport { defaults, required } from 'utils/DefaultProps';\r\nimport Blur, { Props as BlurProps } from 'components/Blur';\r\nimport { useThrottled, useCounter } from 'utils/CustomHooks';\r\nimport { optimizedResize } from 'utils/throttleEvent';\r\nimport { Omit } from 'utils/meta';\r\n\r\n/* interface ModeType {\r\n  style: React.CSSProperties | {};\r\n  current: {\r\n    line: {\r\n      canvasStyle?: CanvasRenderingContext2D | {};\r\n    };\r\n    points: {\r\n      canvasStyle?: CanvasRenderingContext2D | {};\r\n    };\r\n  };\r\n}\r\n\r\nexport const lightMode: ModeType = {\r\n  style: { backgroundColor: 'transparent' },\r\n  current: {\r\n    line: {\r\n      canvasStyle: { strokeStyle: 'hsl(330, 100%, 75%)' },\r\n      // glow: { blurRadius: 10, color: 'hsl(330, 100%, 50%)' },\r\n    },\r\n    points: {\r\n      canvasStyle: { strokeStyle: 'hsl(330, 100%, 75%)' },\r\n      // glow: { blurRadius: 10, color: 'hsl(330, 100%, 50%)' },\r\n    },\r\n  },\r\n}; */\r\n\r\nexport const Props = BlurProps.extend(\r\n  required<Omit<typeof _IVPlot.required, 'svgRef'>>(),\r\n  defaults({\r\n    style: {\r\n      position: 'relative',\r\n      width: '100%',\r\n      height: '150px',\r\n      borderRadius: '5px',\r\n      // border: '10px solid blue',\r\n      backgroundColor: 'black',\r\n    },\r\n  })\r\n);\r\n\r\nconst IVPlot = Props.wrap(({ channelNames, style, ...rest }) => {\r\n  const svgRef = useRef<SVGSVGElement>(null);\r\n\r\n  // Re-render on resize\r\n  const [, tick] = useCounter();\r\n  useThrottled(\r\n    {\r\n      event: optimizedResize,\r\n      last: tick,\r\n    },\r\n    []\r\n  );\r\n\r\n  return (\r\n    <div style={style}>\r\n      <Blur {...rest}>\r\n        <svg ref={svgRef} width='100%' height='100%'>\r\n          <_IVPlot channelNames={channelNames} svgRef={svgRef} />\r\n        </svg>\r\n      </Blur>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default IVPlot;\r\n\r\n/* \r\n// canvasStyle={lightMode.current.line.canvasStyle}\r\n      // glow={lightMode.current.line.glow}\r\n*/\r\n// blur={{ radius: 10 }}\r\n// canvasStyle={lightMode.current.points.canvasStyle}\r\n// glow={lightMode.current.points.glow}\r\n","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport IVPlot from 'components/IVPlot';\n\nclass App extends Component<{}, { bleh: number }> {\n  render() {\n    // return 'blehehehehehe';\n    return (\n      <div style={{ padding: '1vw' }}>\n        <IVPlot channelNames={['ch0', 'ch1']} />\n        <br />\n        <IVPlot channelNames={['ch2', 'ch3']} />\n        <br />\n        <IVPlot channelNames={['debug', 'debug']} />\n      </div>\n    );\n    // return (\n    //   <div className='App'>\n    //     <header className='App-header'>\n    //       <img src={logo} className='App-logo' alt='logo' />\n    //       <p>\n    //         Edit <code>src/App.js</code> and save to reload.\n    //       </p>\n    //       <a\n    //         className='App-link'\n    //         href='https://reactjs.org'\n    //         target='_blank'\n    //         rel='noopener noreferrer'\n    //       >\n    //         Learn React\n    //       </a>\n    //     </header>\n    //   </div>\n    // );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}